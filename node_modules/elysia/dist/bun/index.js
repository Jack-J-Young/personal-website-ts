// @bun
var m6=Object.create;var{defineProperty:y4,getPrototypeOf:o6,getOwnPropertyNames:n6}=Object;var u6=Object.prototype.hasOwnProperty;var t0=($,J,Y)=>{Y=$!=null?m6(o6($)):{};const X=J||!$||!$.__esModule?y4(Y,"default",{value:$,enumerable:!0}):Y;for(let Z of n6($))if(!u6.call(X,Z))y4(X,Z,{get:()=>$[Z],enumerable:!0});return X};var l=($,J)=>()=>(J||$((J={exports:{}}).exports,J),J.exports);var G0=l((n4)=>{Object.defineProperty(n4,"__esModule",{value:!0});n4.Type=n4.StandardType=n4.ExtendedTypeBuilder=n4.StandardTypeBuilder=n4.TypeBuilder=n4.TemplateLiteralDslParser=n4.TemplateLiteralGenerator=n4.TemplateLiteralFinite=n4.TemplateLiteralParser=n4.TemplateLiteralParserError=n4.TemplateLiteralResolver=n4.TemplateLiteralPattern=n4.UnionResolver=n4.KeyArrayResolver=n4.KeyResolver=n4.ObjectMap=n4.Intrinsic=n4.IndexedAccessor=n4.TypeClone=n4.TypeExtends=n4.TypeExtendsResult=n4.ExtendsUndefined=n4.TypeGuard=n4.TypeGuardUnknownTypeError=n4.ValueGuard=n4.FormatRegistry=n4.TypeRegistry=n4.PatternStringExact=n4.PatternNumberExact=n4.PatternBooleanExact=n4.PatternString=n4.PatternNumber=n4.PatternBoolean=n4.Kind=n4.Hint=n4.Optional=n4.Readonly=void 0;n4.Readonly=Symbol.for("TypeBox.Readonly");n4.Optional=Symbol.for("TypeBox.Optional");n4.Hint=Symbol.for("TypeBox.Hint");n4.Kind=Symbol.for("TypeBox.Kind");n4.PatternBoolean="(true|false)";n4.PatternNumber="(0|[1-9][0-9]*)";n4.PatternString="(.*)";n4.PatternBooleanExact=`^${n4.PatternBoolean}\$`;n4.PatternNumberExact=`^${n4.PatternNumber}\$`;n4.PatternStringExact=`^${n4.PatternString}\$`;var k1;(function($){const J=new Map;function Y(){return new Map(J)}$.Entries=Y;function X(){return J.clear()}$.Clear=X;function Z(B){return J.delete(B)}$.Delete=Z;function Q(B){return J.has(B)}$.Has=Q;function q(B,D){J.set(B,D)}$.Set=q;function M(B){return J.get(B)}$.Get=M})(k1||(n4.TypeRegistry=k1={}));var p4;(function($){const J=new Map;function Y(){return new Map(J)}$.Entries=Y;function X(){return J.clear()}$.Clear=X;function Z(B){return J.delete(B)}$.Delete=Z;function Q(B){return J.has(B)}$.Has=Q;function q(B,D){J.set(B,D)}$.Set=q;function M(B){return J.get(B)}$.Get=M})(p4||(n4.FormatRegistry=p4={}));var _;(function($){function J(D){return typeof D==="object"&&D!==null}$.IsObject=J;function Y(D){return Array.isArray(D)}$.IsArray=Y;function X(D){return typeof D==="boolean"}$.IsBoolean=X;function Z(D){return D===null}$.IsNull=Z;function Q(D){return D===void 0}$.IsUndefined=Q;function q(D){return typeof D==="bigint"}$.IsBigInt=q;function M(D){return typeof D==="number"}$.IsNumber=M;function B(D){return typeof D==="string"}$.IsString=B})(_||(n4.ValueGuard=_={}));class o4 extends Error{constructor($){super("TypeGuard: Unknown type");this.schema=$}}n4.TypeGuardUnknownTypeError=o4;var F;(function($){function J(W){try{return new RegExp(W),!0}catch{return!1}}function Y(W){if(!_.IsString(W))return!1;for(let b=0;b<W.length;b++){const C=W.charCodeAt(b);if(C>=7&&C<=13||C===27||C===127)return!1}return!0}function X(W){return q(W)||j(W)}function Z(W){return _.IsUndefined(W)||_.IsBigInt(W)}function Q(W){return _.IsUndefined(W)||_.IsNumber(W)}function q(W){return _.IsUndefined(W)||_.IsBoolean(W)}function M(W){return _.IsUndefined(W)||_.IsString(W)}function B(W){return _.IsUndefined(W)||_.IsString(W)&&Y(W)&&J(W)}function D(W){return _.IsUndefined(W)||_.IsString(W)&&Y(W)}function N(W){return _.IsUndefined(W)||j(W)}function P(W){return T(W,"Any")&&M(W.$id)}$.TAny=P;function w(W){return T(W,"Array")&&W.type==="array"&&M(W.$id)&&j(W.items)&&Q(W.minItems)&&Q(W.maxItems)&&q(W.uniqueItems)&&N(W.contains)&&Q(W.minContains)&&Q(W.maxContains)}$.TArray=w;function A(W){return T(W,"AsyncIterator")&&W.type==="AsyncIterator"&&M(W.$id)&&j(W.items)}$.TAsyncIterator=A;function L(W){return T(W,"BigInt")&&W.type==="bigint"&&M(W.$id)&&Z(W.multipleOf)&&Z(W.minimum)&&Z(W.maximum)&&Z(W.exclusiveMinimum)&&Z(W.exclusiveMaximum)}$.TBigInt=L;function O(W){return T(W,"Boolean")&&W.type==="boolean"&&M(W.$id)}$.TBoolean=O;function R(W){if(!(T(W,"Constructor")&&W.type==="constructor"&&M(W.$id)&&_.IsArray(W.parameters)&&j(W.returns)))return!1;for(let b of W.parameters)if(!j(b))return!1;return!0}$.TConstructor=R;function G(W){return T(W,"Date")&&W.type==="Date"&&M(W.$id)&&Q(W.minimumTimestamp)&&Q(W.maximumTimestamp)&&Q(W.exclusiveMinimumTimestamp)&&Q(W.exclusiveMaximumTimestamp)}$.TDate=G;function k(W){if(!(T(W,"Function")&&W.type==="function"&&M(W.$id)&&_.IsArray(W.parameters)&&j(W.returns)))return!1;for(let b of W.parameters)if(!j(b))return!1;return!0}$.TFunction=k;function y(W){return T(W,"Integer")&&W.type==="integer"&&M(W.$id)&&Q(W.multipleOf)&&Q(W.minimum)&&Q(W.maximum)&&Q(W.exclusiveMinimum)&&Q(W.exclusiveMaximum)}$.TInteger=y;function S(W){if(!(T(W,"Intersect")&&_.IsArray(W.allOf)&&M(W.type)&&(q(W.unevaluatedProperties)||N(W.unevaluatedProperties))&&M(W.$id)))return!1;if(("type"in W)&&W.type!=="object")return!1;for(let b of W.allOf)if(!j(b))return!1;return!0}$.TIntersect=S;function V(W){return T(W,"Iterator")&&W.type==="Iterator"&&M(W.$id)&&j(W.items)}$.TIterator=V;function T(W,b){return F0(W)&&W[n4.Kind]===b}$.TKindOf=T;function F0(W){return _.IsObject(W)&&(n4.Kind in W)&&_.IsString(W[n4.Kind])}$.TKind=F0;function J0(W){return T0(W)&&_.IsString(W.const)}$.TLiteralString=J0;function X$(W){return T0(W)&&_.IsNumber(W.const)}$.TLiteralNumber=X$;function b0(W){return T0(W)&&_.IsBoolean(W.const)}$.TLiteralBoolean=b0;function T0(W){return T(W,"Literal")&&M(W.$id)&&(_.IsBoolean(W.const)||_.IsNumber(W.const)||_.IsString(W.const))}$.TLiteral=T0;function e(W){return T(W,"Never")&&_.IsObject(W.not)&&Object.getOwnPropertyNames(W.not).length===0}$.TNever=e;function Z$(W){return T(W,"Not")&&j(W.not)}$.TNot=Z$;function Q$(W){return T(W,"Null")&&W.type==="null"&&M(W.$id)}$.TNull=Q$;function h0(W){return T(W,"Number")&&W.type==="number"&&M(W.$id)&&Q(W.multipleOf)&&Q(W.minimum)&&Q(W.maximum)&&Q(W.exclusiveMinimum)&&Q(W.exclusiveMaximum)}$.TNumber=h0;function W$(W){if(!(T(W,"Object")&&W.type==="object"&&M(W.$id)&&_.IsObject(W.properties)&&X(W.additionalProperties)&&Q(W.minProperties)&&Q(W.maxProperties)))return!1;for(let[b,C]of Object.entries(W.properties)){if(!Y(b))return!1;if(!j(C))return!1}return!0}$.TObject=W$;function U$(W){return T(W,"Promise")&&W.type==="Promise"&&M(W.$id)&&j(W.item)}$.TPromise=U$;function B$(W){if(!(T(W,"Record")&&W.type==="object"&&M(W.$id)&&X(W.additionalProperties)&&_.IsObject(W.patternProperties)))return!1;const b=Object.getOwnPropertyNames(W.patternProperties);if(b.length!==1)return!1;if(!J(b[0]))return!1;if(!j(W.patternProperties[b[0]]))return!1;return!0}$.TRecord=B$;function A$(W){return T(W,"Ref")&&M(W.$id)&&_.IsString(W.$ref)}$.TRef=A$;function N$(W){return T(W,"String")&&W.type==="string"&&M(W.$id)&&Q(W.minLength)&&Q(W.maxLength)&&B(W.pattern)&&D(W.format)}$.TString=N$;function D$(W){return T(W,"Symbol")&&W.type==="symbol"&&M(W.$id)}$.TSymbol=D$;function A0(W){return T(W,"TemplateLiteral")&&W.type==="string"&&_.IsString(W.pattern)&&W.pattern[0]==="^"&&W.pattern[W.pattern.length-1]==="$"}$.TTemplateLiteral=A0;function r(W){return T(W,"This")&&M(W.$id)&&_.IsString(W.$ref)}$.TThis=r;function Y0(W){if(!(T(W,"Tuple")&&W.type==="array"&&M(W.$id)&&_.IsNumber(W.minItems)&&_.IsNumber(W.maxItems)&&W.minItems===W.maxItems))return!1;if(_.IsUndefined(W.items)&&_.IsUndefined(W.additionalItems)&&W.minItems===0)return!0;if(!_.IsArray(W.items))return!1;for(let b of W.items)if(!j(b))return!1;return!0}$.TTuple=Y0;function t(W){return T(W,"Undefined")&&W.type==="undefined"&&M(W.$id)}$.TUndefined=t;function d0(W){return l0(W)&&W.anyOf.every((b)=>J0(b)||X$(b))}$.TUnionLiteral=d0;function l0(W){if(!(T(W,"Union")&&_.IsArray(W.anyOf)&&M(W.$id)))return!1;for(let b of W.anyOf)if(!j(b))return!1;return!0}$.TUnion=l0;function _0(W){return T(W,"Uint8Array")&&W.type==="Uint8Array"&&M(W.$id)&&Q(W.minByteLength)&&Q(W.maxByteLength)}$.TUint8Array=_0;function y0(W){return T(W,"Unknown")&&M(W.$id)}$.TUnknown=y0;function X0(W){return T(W,"Unsafe")}$.TUnsafe=X0;function z$(W){return T(W,"Void")&&W.type==="void"&&M(W.$id)}$.TVoid=z$;function w$(W){return _.IsObject(W)&&W[n4.Readonly]==="Readonly"}$.TReadonly=w$;function U(W){return _.IsObject(W)&&W[n4.Optional]==="Optional"}$.TOptional=U;function j(W){return _.IsObject(W)&&(P(W)||w(W)||O(W)||L(W)||A(W)||R(W)||G(W)||k(W)||y(W)||S(W)||V(W)||T0(W)||e(W)||Z$(W)||Q$(W)||h0(W)||W$(W)||U$(W)||B$(W)||A$(W)||N$(W)||D$(W)||A0(W)||r(W)||Y0(W)||t(W)||l0(W)||_0(W)||y0(W)||X0(W)||z$(W)||F0(W)&&k1.Has(W[n4.Kind]))}$.TSchema=j})(F||(n4.TypeGuard=F={}));var m4;(function($){function J(Y){if(Y[n4.Kind]==="Undefined")return!0;if(Y[n4.Kind]==="Not")return!J(Y.not);if(Y[n4.Kind]==="Intersect")return Y.allOf.every((Z)=>J(Z));if(Y[n4.Kind]==="Union")return Y.anyOf.some((Z)=>J(Z));return!1}$.Check=J})(m4||(n4.ExtendsUndefined=m4={}));var K;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(K||(n4.TypeExtendsResult=K={}));var H$;(function($){function J(H){return H===K.False?K.False:K.True}function Y(H){return F.TNever(H)||F.TIntersect(H)||F.TUnion(H)||F.TUnknown(H)||F.TAny(H)}function X(H,z){if(F.TNever(z))return V(H,z);if(F.TIntersect(z))return G(H,z);if(F.TUnion(z))return N0(H,z);if(F.TUnknown(z))return w0(H,z);if(F.TAny(z))return Z(H,z);throw Error("TypeExtends: StructuralRight")}function Z(H,z){return K.True}function Q(H,z){if(F.TIntersect(z))return G(H,z);if(F.TUnion(z)&&z.anyOf.some((p)=>F.TAny(p)||F.TUnknown(p)))return K.True;if(F.TUnion(z))return K.Union;if(F.TUnknown(z))return K.True;if(F.TAny(z))return K.True;return K.Union}function q(H,z){if(F.TUnknown(H))return K.False;if(F.TAny(H))return K.Union;if(F.TNever(H))return K.True;return K.False}function M(H,z){if(Y(z))return X(H,z);if(F.TObject(z)&&A0(z))return K.True;if(!F.TArray(z))return K.False;return J(n(H.items,z.items))}function B(H,z){if(Y(z))return X(H,z);if(!F.TAsyncIterator(z))return K.False;return J(n(H.items,z.items))}function D(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(F.TRecord(z))return X0(H,z);return F.TBigInt(z)?K.True:K.False}function N(H,z){if(F.TLiteral(H)&&_.IsBoolean(H.const))return K.True;return F.TBoolean(H)?K.True:K.False}function P(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(F.TRecord(z))return X0(H,z);return F.TBoolean(z)?K.True:K.False}function w(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(!F.TConstructor(z))return K.False;if(H.parameters.length>z.parameters.length)return K.False;if(!H.parameters.every((p,R0)=>J(n(z.parameters[R0],p))===K.True))return K.False;return J(n(H.returns,z.returns))}function A(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(F.TRecord(z))return X0(H,z);return F.TDate(z)?K.True:K.False}function L(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(!F.TFunction(z))return K.False;if(H.parameters.length>z.parameters.length)return K.False;if(!H.parameters.every((p,R0)=>J(n(z.parameters[R0],p))===K.True))return K.False;return J(n(H.returns,z.returns))}function O(H,z){if(F.TLiteral(H)&&_.IsNumber(H.const))return K.True;return F.TNumber(H)||F.TInteger(H)?K.True:K.False}function R(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(F.TRecord(z))return X0(H,z);return F.TInteger(z)||F.TNumber(z)?K.True:K.False}function G(H,z){return z.allOf.every((p)=>n(H,p)===K.True)?K.True:K.False}function k(H,z){return H.allOf.some((p)=>n(p,z)===K.True)?K.True:K.False}function y(H,z){if(Y(z))return X(H,z);if(!F.TIterator(z))return K.False;return J(n(H.items,z.items))}function S(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(F.TRecord(z))return X0(H,z);if(F.TString(z))return w$(H,z);if(F.TNumber(z))return b0(H,z);if(F.TInteger(z))return O(H,z);if(F.TBoolean(z))return N(H,z);return F.TLiteral(z)&&z.const===H.const?K.True:K.False}function V(H,z){return K.False}function T(H,z){return K.True}function F0(H){let[z,p]=[H,0];while(!0){if(!F.TNot(z))break;z=z.not,p+=1}return p%2===0?z:n4.Type.Unknown()}function J0(H,z){if(F.TNot(H))return n(F0(H),z);if(F.TNot(z))return n(H,F0(z));throw new Error("TypeExtends: Invalid fallthrough for Not")}function X$(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(F.TRecord(z))return X0(H,z);return F.TNull(z)?K.True:K.False}function b0(H,z){if(F.TLiteralNumber(H))return K.True;return F.TNumber(H)||F.TInteger(H)?K.True:K.False}function T0(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(F.TRecord(z))return X0(H,z);return F.TInteger(z)||F.TNumber(z)?K.True:K.False}function e(H,z){return Object.getOwnPropertyNames(H.properties).length===z}function Z$(H){return A0(H)}function Q$(H){return e(H,0)||e(H,1)&&("description"in H.properties)&&F.TUnion(H.properties.description)&&H.properties.description.anyOf.length===2&&(F.TString(H.properties.description.anyOf[0])&&F.TUndefined(H.properties.description.anyOf[1])||F.TString(H.properties.description.anyOf[1])&&F.TUndefined(H.properties.description.anyOf[0]))}function h0(H){return e(H,0)}function W$(H){return e(H,0)}function U$(H){return e(H,0)}function B$(H){return e(H,0)}function A$(H){return A0(H)}function N$(H){const z=n4.Type.Number();return e(H,0)||e(H,1)&&("length"in H.properties)&&J(n(H.properties.length,z))===K.True}function D$(H){return e(H,0)}function A0(H){const z=n4.Type.Number();return e(H,0)||e(H,1)&&("length"in H.properties)&&J(n(H.properties.length,z))===K.True}function r(H){const z=n4.Type.Function([n4.Type.Any()],n4.Type.Any());return e(H,0)||e(H,1)&&("then"in H.properties)&&J(n(H.properties.then,z))===K.True}function Y0(H,z){if(n(H,z)===K.False)return K.False;if(F.TOptional(H)&&!F.TOptional(z))return K.False;return K.True}function t(H,z){if(F.TUnknown(H))return K.False;if(F.TAny(H))return K.Union;if(F.TNever(H))return K.True;if(F.TLiteralString(H)&&Z$(z))return K.True;if(F.TLiteralNumber(H)&&h0(z))return K.True;if(F.TLiteralBoolean(H)&&W$(z))return K.True;if(F.TSymbol(H)&&Q$(z))return K.True;if(F.TBigInt(H)&&U$(z))return K.True;if(F.TString(H)&&Z$(z))return K.True;if(F.TSymbol(H)&&Q$(z))return K.True;if(F.TNumber(H)&&h0(z))return K.True;if(F.TInteger(H)&&h0(z))return K.True;if(F.TBoolean(H)&&W$(z))return K.True;if(F.TUint8Array(H)&&A$(z))return K.True;if(F.TDate(H)&&B$(z))return K.True;if(F.TConstructor(H)&&D$(z))return K.True;if(F.TFunction(H)&&N$(z))return K.True;if(F.TRecord(H)&&F.TString(_0(H)))return z[n4.Hint]==="Record"?K.True:K.False;if(F.TRecord(H)&&F.TNumber(_0(H)))return e(z,0)?K.True:K.False;return K.False}function d0(H,z){if(Y(z))return X(H,z);if(F.TRecord(z))return X0(H,z);if(!F.TObject(z))return K.False;for(let p of Object.getOwnPropertyNames(z.properties)){if(!(p in H.properties))return K.False;if(Y0(H.properties[p],z.properties[p])===K.False)return K.False}return K.True}function l0(H,z){if(Y(z))return X(H,z);if(F.TObject(z)&&r(z))return K.True;if(!F.TPromise(z))return K.False;return J(n(H.item,z.item))}function _0(H){if(n4.PatternNumberExact in H.patternProperties)return n4.Type.Number();if(n4.PatternStringExact in H.patternProperties)return n4.Type.String();throw Error("TypeExtends: Cannot get record key")}function y0(H){if(n4.PatternNumberExact in H.patternProperties)return H.patternProperties[n4.PatternNumberExact];if(n4.PatternStringExact in H.patternProperties)return H.patternProperties[n4.PatternStringExact];throw Error("TypeExtends: Cannot get record value")}function X0(H,z){const p=_0(z),R0=y0(z);if(F.TLiteralString(H)&&F.TNumber(p)&&J(n(H,R0))===K.True)return K.True;if(F.TUint8Array(H)&&F.TNumber(p))return n(H,R0);if(F.TString(H)&&F.TNumber(p))return n(H,R0);if(F.TArray(H)&&F.TNumber(p))return n(H,R0);if(F.TObject(H)){for(let p6 of Object.getOwnPropertyNames(H.properties))if(Y0(R0,H.properties[p6])===K.False)return K.False;return K.True}return K.False}function z$(H,z){const p=y0(H);if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(!F.TRecord(z))return K.False;return n(p,y0(z))}function w$(H,z){if(F.TLiteral(H)&&_.IsString(H.const))return K.True;return F.TString(H)?K.True:K.False}function U(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(F.TRecord(z))return X0(H,z);return F.TString(z)?K.True:K.False}function j(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(F.TRecord(z))return X0(H,z);return F.TSymbol(z)?K.True:K.False}function W(H,z){if(F.TTemplateLiteral(H))return n(v0.Resolve(H),z);if(F.TTemplateLiteral(z))return n(H,v0.Resolve(z));throw new Error("TypeExtends: Invalid fallthrough for TemplateLiteral")}function b(H,z){return F.TArray(z)&&H.items!==void 0&&H.items.every((p)=>n(p,z.items)===K.True)}function C(H,z){if(F.TNever(H))return K.True;if(F.TUnknown(H))return K.False;if(F.TAny(H))return K.Union;return K.False}function E(H,z){if(Y(z))return X(H,z);if(F.TObject(z)&&A0(z))return K.True;if(F.TArray(z)&&b(H,z))return K.True;if(!F.TTuple(z))return K.False;if(_.IsUndefined(H.items)&&!_.IsUndefined(z.items)||!_.IsUndefined(H.items)&&_.IsUndefined(z.items))return K.False;if(_.IsUndefined(H.items)&&!_.IsUndefined(z.items))return K.True;return H.items.every((p,R0)=>n(p,z.items[R0])===K.True)?K.True:K.False}function c(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(F.TRecord(z))return X0(H,z);return F.TUint8Array(z)?K.True:K.False}function z0(H,z){if(Y(z))return X(H,z);if(F.TObject(z))return t(H,z);if(F.TRecord(z))return X0(H,z);if(F.TVoid(z))return x1(H,z);return F.TUndefined(z)?K.True:K.False}function N0(H,z){return z.anyOf.some((p)=>n(H,p)===K.True)?K.True:K.False}function D0(H,z){return H.anyOf.every((p)=>n(p,z)===K.True)?K.True:K.False}function w0(H,z){return K.True}function K$(H,z){if(F.TNever(z))return V(H,z);if(F.TIntersect(z))return G(H,z);if(F.TUnion(z))return N0(H,z);if(F.TAny(z))return Z(H,z);if(F.TString(z))return w$(H,z);if(F.TNumber(z))return b0(H,z);if(F.TInteger(z))return O(H,z);if(F.TBoolean(z))return N(H,z);if(F.TArray(z))return q(H,z);if(F.TTuple(z))return C(H,z);if(F.TObject(z))return t(H,z);return F.TUnknown(z)?K.True:K.False}function x1(H,z){if(F.TUndefined(H))return K.True;return F.TUndefined(H)?K.True:K.False}function d4(H,z){if(F.TIntersect(z))return G(H,z);if(F.TUnion(z))return N0(H,z);if(F.TUnknown(z))return w0(H,z);if(F.TAny(z))return Z(H,z);if(F.TObject(z))return t(H,z);return F.TVoid(z)?K.True:K.False}function n(H,z){if(F.TTemplateLiteral(H)||F.TTemplateLiteral(z))return W(H,z);if(F.TNot(H)||F.TNot(z))return J0(H,z);if(F.TAny(H))return Q(H,z);if(F.TArray(H))return M(H,z);if(F.TBigInt(H))return D(H,z);if(F.TBoolean(H))return P(H,z);if(F.TAsyncIterator(H))return B(H,z);if(F.TConstructor(H))return w(H,z);if(F.TDate(H))return A(H,z);if(F.TFunction(H))return L(H,z);if(F.TInteger(H))return R(H,z);if(F.TIntersect(H))return k(H,z);if(F.TIterator(H))return y(H,z);if(F.TLiteral(H))return S(H,z);if(F.TNever(H))return T(H,z);if(F.TNull(H))return X$(H,z);if(F.TNumber(H))return T0(H,z);if(F.TObject(H))return d0(H,z);if(F.TRecord(H))return z$(H,z);if(F.TString(H))return U(H,z);if(F.TSymbol(H))return j(H,z);if(F.TTuple(H))return E(H,z);if(F.TPromise(H))return l0(H,z);if(F.TUint8Array(H))return c(H,z);if(F.TUndefined(H))return z0(H,z);if(F.TUnion(H))return D0(H,z);if(F.TUnknown(H))return K$(H,z);if(F.TVoid(H))return d4(H,z);throw Error(`TypeExtends: Unknown left type operand '${H[n4.Kind]}'`)}function i6(H,z){return n(H,z)}$.Extends=i6})(H$||(n4.TypeExtends=H$={}));var g;(function($){function J(Q){const q=Object.getOwnPropertyNames(Q).reduce((B,D)=>({...B,[D]:X(Q[D])}),{}),M=Object.getOwnPropertySymbols(Q).reduce((B,D)=>({...B,[D]:X(Q[D])}),{});return{...q,...M}}function Y(Q){return Q.map((q)=>X(q))}function X(Q){if(_.IsArray(Q))return Y(Q);if(_.IsObject(Q))return J(Q);return Q}function Z(Q,q={}){return{...X(Q),...q}}$.Clone=Z})(g||(n4.TypeClone=g={}));var g1;(function($){function J(A){return A.map((L)=>{const{[n4.Optional]:O,...R}=g.Clone(L);return R})}function Y(A){return A.every((L)=>F.TOptional(L))}function X(A){return A.some((L)=>F.TOptional(L))}function Z(A){return Y(A.allOf)?n4.Type.Optional(n4.Type.Intersect(J(A.allOf))):A}function Q(A){return X(A.anyOf)?n4.Type.Optional(n4.Type.Union(J(A.anyOf))):A}function q(A){if(A[n4.Kind]==="Intersect")return Z(A);if(A[n4.Kind]==="Union")return Q(A);return A}function M(A,L){const O=A.allOf.reduce((R,G)=>{const k=P(G,L);return k[n4.Kind]==="Never"?R:[...R,k]},[]);return q(n4.Type.Intersect(O))}function B(A,L){const O=A.anyOf.map((R)=>P(R,L));return q(n4.Type.Union(O))}function D(A,L){const O=A.properties[L];return _.IsUndefined(O)?n4.Type.Never():n4.Type.Union([O])}function N(A,L){const O=A.items;if(_.IsUndefined(O))return n4.Type.Never();const R=O[L];if(_.IsUndefined(R))return n4.Type.Never();return R}function P(A,L){if(A[n4.Kind]==="Intersect")return M(A,L);if(A[n4.Kind]==="Union")return B(A,L);if(A[n4.Kind]==="Object")return D(A,L);if(A[n4.Kind]==="Tuple")return N(A,L);return n4.Type.Never()}function w(A,L,O={}){const R=L.map((G)=>P(A,G.toString()));return q(n4.Type.Union(R,O))}$.Resolve=w})(g1||(n4.IndexedAccessor=g1={}));var j$;(function($){function J(N){const[P,w]=[N.slice(0,1),N.slice(1)];return`${P.toLowerCase()}${w}`}function Y(N){const[P,w]=[N.slice(0,1),N.slice(1)];return`${P.toUpperCase()}${w}`}function X(N){return N.toUpperCase()}function Z(N){return N.toLowerCase()}function Q(N,P){const w=C$.ParseExact(N.pattern);if(!I$.Check(w))return{...N,pattern:q(N.pattern,P)};const O=[...b$.Generate(w)].map((k)=>n4.Type.Literal(k)),R=M(O,P),G=n4.Type.Union(R);return n4.Type.TemplateLiteral([G])}function q(N,P){return typeof N==="string"?P==="Uncapitalize"?J(N):P==="Capitalize"?Y(N):P==="Uppercase"?X(N):P==="Lowercase"?Z(N):N:N.toString()}function M(N,P){if(N.length===0)return[];const[w,...A]=N;return[D(w,P),...M(A,P)]}function B(N,P){if(F.TTemplateLiteral(N))return Q(N,P);if(F.TUnion(N))return n4.Type.Union(M(N.anyOf,P));if(F.TLiteral(N))return n4.Type.Literal(q(N.const,P));return N}function D(N,P){return B(N,P)}$.Map=D})(j$||(n4.Intrinsic=j$={}));var S$;(function($){function J(q,M){return n4.Type.Intersect(q.allOf.map((B)=>Z(B,M)),{...q})}function Y(q,M){return n4.Type.Union(q.anyOf.map((B)=>Z(B,M)),{...q})}function X(q,M){return M(q)}function Z(q,M){if(q[n4.Kind]==="Intersect")return J(q,M);if(q[n4.Kind]==="Union")return Y(q,M);if(q[n4.Kind]==="Object")return X(q,M);return q}function Q(q,M,B){return{...Z(g.Clone(q),M),...B}}$.Map=Q})(S$||(n4.ObjectMap=S$={}));var Y1;(function($){function J(D){return D[0]==="^"&&D[D.length-1]==="$"?D.slice(1,D.length-1):D}function Y(D,N){return D.allOf.reduce((P,w)=>[...P,...q(w,N)],[])}function X(D,N){const P=D.anyOf.map((w)=>q(w,N));return[...P.reduce((w,A)=>A.map((L)=>P.every((O)=>O.includes(L))?w.add(L):w)[0],new Set)]}function Z(D,N){return Object.getOwnPropertyNames(D.properties)}function Q(D,N){return N.includePatterns?Object.getOwnPropertyNames(D.patternProperties):[]}function q(D,N){if(F.TIntersect(D))return Y(D,N);if(F.TUnion(D))return X(D,N);if(F.TObject(D))return Z(D,N);if(F.TRecord(D))return Q(D,N);return[]}function M(D,N){return[...new Set(q(D,N))]}$.ResolveKeys=M;function B(D){return`^(${M(D,{includePatterns:!0}).map((w)=>`(${J(w)})`).join("|")})\$`}$.ResolvePattern=B})(Y1||(n4.KeyResolver=Y1={}));var d$;(function($){function J(Y){if(Array.isArray(Y))return Y;if(F.TUnionLiteral(Y))return Y.anyOf.map((X)=>X.const.toString());if(F.TLiteral(Y))return[Y.const];if(F.TTemplateLiteral(Y)){const X=C$.ParseExact(Y.pattern);if(!I$.Check(X))throw Error("KeyArrayResolver: Cannot resolve keys from infinite template expression");return[...b$.Generate(X)]}return[]}$.Resolve=J})(d$||(n4.KeyArrayResolver=d$={}));var f1;(function($){function*J(X){for(let Z of X.anyOf)if(Z[n4.Kind]==="Union")yield*J(Z);else yield Z}function Y(X){return n4.Type.Union([...J(X)],{...X})}$.Resolve=Y})(f1||(n4.UnionResolver=f1={}));var X1;(function($){function J(Z){return Z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Y(Z,Q){if(F.TTemplateLiteral(Z))return Z.pattern.slice(1,Z.pattern.length-1);else if(F.TUnion(Z))return`(${Z.anyOf.map((q)=>Y(q,Q)).join("|")})`;else if(F.TNumber(Z))return`${Q}${n4.PatternNumber}`;else if(F.TInteger(Z))return`${Q}${n4.PatternNumber}`;else if(F.TBigInt(Z))return`${Q}${n4.PatternNumber}`;else if(F.TString(Z))return`${Q}${n4.PatternString}`;else if(F.TLiteral(Z))return`${Q}${J(Z.const.toString())}`;else if(F.TBoolean(Z))return`${Q}${n4.PatternBoolean}`;else if(F.TNever(Z))throw Error("TemplateLiteralPattern: TemplateLiteral cannot operate on types of TNever");else throw Error(`TemplateLiteralPattern: Unexpected Kind '${Z[n4.Kind]}'`)}function X(Z){return`^${Z.map((Q)=>Y(Q,"")).join("")}$`}$.Create=X})(X1||(n4.TemplateLiteralPattern=X1={}));var v0;(function($){function J(Y){const X=C$.ParseExact(Y.pattern);if(!I$.Check(X))return n4.Type.String();const Z=[...b$.Generate(X)].map((Q)=>n4.Type.Literal(Q));return n4.Type.Union(Z)}$.Resolve=J})(v0||(n4.TemplateLiteralResolver=v0={}));class Z1 extends Error{constructor($){super($)}}n4.TemplateLiteralParserError=Z1;var C$;(function($){function J(A,L,O){return A[L]===O&&A.charCodeAt(L-1)!==92}function Y(A,L){return J(A,L,"(")}function X(A,L){return J(A,L,")")}function Z(A,L){return J(A,L,"|")}function Q(A){if(!(Y(A,0)&&X(A,A.length-1)))return!1;let L=0;for(let O=0;O<A.length;O++){if(Y(A,O))L+=1;if(X(A,O))L-=1;if(L===0&&O!==A.length-1)return!1}return!0}function q(A){return A.slice(1,A.length-1)}function M(A){let L=0;for(let O=0;O<A.length;O++){if(Y(A,O))L+=1;if(X(A,O))L-=1;if(Z(A,O)&&L===0)return!0}return!1}function B(A){for(let L=0;L<A.length;L++)if(Y(A,L))return!0;return!1}function D(A){let[L,O]=[0,0];const R=[];for(let k=0;k<A.length;k++){if(Y(A,k))L+=1;if(X(A,k))L-=1;if(Z(A,k)&&L===0){const y=A.slice(O,k);if(y.length>0)R.push(P(y));O=k+1}}const G=A.slice(O);if(G.length>0)R.push(P(G));if(R.length===0)return{type:"const",const:""};if(R.length===1)return R[0];return{type:"or",expr:R}}function N(A){function L(G,k){if(!Y(G,k))throw new Z1("TemplateLiteralParser: Index must point to open parens");let y=0;for(let S=k;S<G.length;S++){if(Y(G,S))y+=1;if(X(G,S))y-=1;if(y===0)return[k,S]}throw new Z1("TemplateLiteralParser: Unclosed group parens in expression")}function O(G,k){for(let y=k;y<G.length;y++)if(Y(G,y))return[k,y];return[k,G.length]}const R=[];for(let G=0;G<A.length;G++)if(Y(A,G)){const[k,y]=L(A,G),S=A.slice(k,y+1);R.push(P(S)),G=y}else{const[k,y]=O(A,G),S=A.slice(k,y);if(S.length>0)R.push(P(S));G=y-1}if(R.length===0)return{type:"const",const:""};if(R.length===1)return R[0];return{type:"and",expr:R}}function P(A){if(Q(A))return P(q(A));if(M(A))return D(A);if(B(A))return N(A);return{type:"const",const:A}}$.Parse=P;function w(A){return P(A.slice(1,A.length-1))}$.ParseExact=w})(C$||(n4.TemplateLiteralParser=C$={}));var I$;(function($){function J(Q){return Q.type==="or"&&Q.expr.length===2&&Q.expr[0].type==="const"&&Q.expr[0].const==="0"&&Q.expr[1].type==="const"&&Q.expr[1].const==="[1-9][0-9]*"}function Y(Q){return Q.type==="or"&&Q.expr.length===2&&Q.expr[0].type==="const"&&Q.expr[0].const==="true"&&Q.expr[1].type==="const"&&Q.expr[1].const==="false"}function X(Q){return Q.type==="const"&&Q.const===".*"}function Z(Q){if(Y(Q))return!0;if(J(Q)||X(Q))return!1;if(Q.type==="and")return Q.expr.every((q)=>Z(q));if(Q.type==="or")return Q.expr.every((q)=>Z(q));if(Q.type==="const")return!0;throw Error("TemplateLiteralFinite: Unknown expression type")}$.Check=Z})(I$||(n4.TemplateLiteralFinite=I$={}));var b$;(function($){function*J(q){if(q.length===1)return yield*q[0];for(let M of q[0])for(let B of J(q.slice(1)))yield`${M}${B}`}function*Y(q){return yield*J(q.expr.map((M)=>[...Q(M)]))}function*X(q){for(let M of q.expr)yield*Q(M)}function*Z(q){return yield q.const}function*Q(q){if(q.type==="and")return yield*Y(q);if(q.type==="or")return yield*X(q);if(q.type==="const")return yield*Z(q);throw Error("TemplateLiteralGenerator: Unknown expression")}$.Generate=Q})(b$||(n4.TemplateLiteralGenerator=b$={}));var T1;(function($){function*J(Q){const q=Q.trim().replace(/"|'/g,"");if(q==="boolean")return yield n4.Type.Boolean();if(q==="number")return yield n4.Type.Number();if(q==="bigint")return yield n4.Type.BigInt();if(q==="string")return yield n4.Type.String();const M=q.split("|").map((B)=>n4.Type.Literal(B.trim()));return yield M.length===0?n4.Type.Never():M.length===1?M[0]:n4.Type.Union(M)}function*Y(Q){if(Q[1]!=="{"){const q=n4.Type.Literal("$"),M=X(Q.slice(1));return yield*[q,...M]}for(let q=2;q<Q.length;q++)if(Q[q]==="}"){const M=J(Q.slice(2,q)),B=X(Q.slice(q+1));return yield*[...M,...B]}yield n4.Type.Literal(Q)}function*X(Q){for(let q=0;q<Q.length;q++)if(Q[q]==="$"){const M=n4.Type.Literal(Q.slice(0,q)),B=Y(Q.slice(q));return yield*[M,...B]}yield n4.Type.Literal(Q)}function Z(Q){return[...X(Q)]}$.Parse=Z})(T1||(n4.TemplateLiteralDslParser=T1={}));var c6=0;class d1{Create($){return $}Discard($,J){const{[J]:Y,...X}=$;return X}Strict($){return JSON.parse(JSON.stringify($))}}n4.TypeBuilder=d1;class W1 extends d1{ReadonlyOptional($){return this.Readonly(this.Optional($))}Readonly($){return{...g.Clone($),[n4.Readonly]:"Readonly"}}Optional($){return{...g.Clone($),[n4.Optional]:"Optional"}}Any($={}){return this.Create({...$,[n4.Kind]:"Any"})}Array($,J={}){return this.Create({...J,[n4.Kind]:"Array",type:"array",items:g.Clone($)})}Boolean($={}){return this.Create({...$,[n4.Kind]:"Boolean",type:"boolean"})}Capitalize($,J={}){return{...j$.Map(g.Clone($),"Capitalize"),...J}}Composite($,J){const Y=n4.Type.Intersect($,{}),Z=Y1.ResolveKeys(Y,{includePatterns:!1}).reduce((Q,q)=>({...Q,[q]:n4.Type.Index(Y,[q])}),{});return n4.Type.Object(Z,J)}Enum($,J={}){const X=Object.getOwnPropertyNames($).filter((Z)=>isNaN(Z)).map((Z)=>$[Z]).map((Z)=>_.IsString(Z)?{[n4.Kind]:"Literal",type:"string",const:Z}:{[n4.Kind]:"Literal",type:"number",const:Z});return this.Create({...J,[n4.Kind]:"Union",anyOf:X})}Extends($,J,Y,X,Z={}){switch(H$.Extends($,J)){case K.Union:return this.Union([g.Clone(Y,Z),g.Clone(X,Z)]);case K.True:return g.Clone(Y,Z);case K.False:return g.Clone(X,Z)}}Exclude($,J,Y={}){if(F.TTemplateLiteral($))return this.Exclude(v0.Resolve($),J,Y);if(F.TTemplateLiteral(J))return this.Exclude($,v0.Resolve(J),Y);if(F.TUnion($)){const X=$.anyOf.filter((Z)=>H$.Extends(Z,J)===K.False);return X.length===1?g.Clone(X[0],Y):this.Union(X,Y)}else return H$.Extends($,J)!==K.False?this.Never(Y):g.Clone($,Y)}Extract($,J,Y={}){if(F.TTemplateLiteral($))return this.Extract(v0.Resolve($),J,Y);if(F.TTemplateLiteral(J))return this.Extract($,v0.Resolve(J),Y);if(F.TUnion($)){const X=$.anyOf.filter((Z)=>H$.Extends(Z,J)!==K.False);return X.length===1?g.Clone(X[0],Y):this.Union(X,Y)}else return H$.Extends($,J)!==K.False?g.Clone($,Y):this.Never(Y)}Index($,J,Y={}){if(F.TArray($)&&F.TNumber(J))return g.Clone($.items,Y);else if(F.TTuple($)&&F.TNumber(J)){const Z=(_.IsUndefined($.items)?[]:$.items).map((Q)=>g.Clone(Q));return this.Union(Z,Y)}else{const X=d$.Resolve(J),Z=g.Clone($);return g1.Resolve(Z,X,Y)}}Integer($={}){return this.Create({...$,[n4.Kind]:"Integer",type:"integer"})}Intersect($,J={}){if($.length===0)return n4.Type.Never();if($.length===1)return g.Clone($[0],J);const Y=$.every((Q)=>F.TObject(Q)),X=$.map((Q)=>g.Clone(Q)),Z=F.TSchema(J.unevaluatedProperties)?{unevaluatedProperties:g.Clone(J.unevaluatedProperties)}:{};if(J.unevaluatedProperties===!1||F.TSchema(J.unevaluatedProperties)||Y)return this.Create({...J,...Z,[n4.Kind]:"Intersect",type:"object",allOf:X});else return this.Create({...J,...Z,[n4.Kind]:"Intersect",allOf:X})}KeyOf($,J={}){if(F.TRecord($)){const Y=Object.getOwnPropertyNames($.patternProperties)[0];if(Y===n4.PatternNumberExact)return this.Number(J);if(Y===n4.PatternStringExact)return this.String(J);throw Error("StandardTypeBuilder: Unable to resolve key type from Record key pattern")}else if(F.TTuple($)){const X=(_.IsUndefined($.items)?[]:$.items).map((Z,Q)=>n4.Type.Literal(Q));return this.Union(X,J)}else if(F.TArray($))return this.Number(J);else{const Y=Y1.ResolveKeys($,{includePatterns:!1});if(Y.length===0)return this.Never(J);const X=Y.map((Z)=>this.Literal(Z));return this.Union(X,J)}}Literal($,J={}){return this.Create({...J,[n4.Kind]:"Literal",const:$,type:typeof $})}Lowercase($,J={}){return{...j$.Map(g.Clone($),"Lowercase"),...J}}Never($={}){return this.Create({...$,[n4.Kind]:"Never",not:{}})}Not($,J){return this.Create({...J,[n4.Kind]:"Not",not:g.Clone($)})}Null($={}){return this.Create({...$,[n4.Kind]:"Null",type:"null"})}Number($={}){return this.Create({...$,[n4.Kind]:"Number",type:"number"})}Object($,J={}){const Y=Object.getOwnPropertyNames($),X=Y.filter((M)=>F.TOptional($[M])),Z=Y.filter((M)=>!X.includes(M)),Q=F.TSchema(J.additionalProperties)?{additionalProperties:g.Clone(J.additionalProperties)}:{},q=Y.reduce((M,B)=>({...M,[B]:g.Clone($[B])}),{});if(Z.length>0)return this.Create({...J,...Q,[n4.Kind]:"Object",type:"object",properties:q,required:Z});else return this.Create({...J,...Q,[n4.Kind]:"Object",type:"object",properties:q})}Omit($,J,Y={}){const X=d$.Resolve(J);return S$.Map(g.Clone($),(Z)=>{if(_.IsArray(Z.required)){if(Z.required=Z.required.filter((Q)=>!X.includes(Q)),Z.required.length===0)delete Z.required}for(let Q of Object.getOwnPropertyNames(Z.properties))if(X.includes(Q))delete Z.properties[Q];return this.Create(Z)},Y)}Partial($,J={}){return S$.Map($,(Y)=>{const X=Object.getOwnPropertyNames(Y.properties).reduce((Z,Q)=>{return{...Z,[Q]:this.Optional(Y.properties[Q])}},{});return this.Object(X,this.Discard(Y,"required"))},J)}Pick($,J,Y={}){const X=d$.Resolve(J);return S$.Map(g.Clone($),(Z)=>{if(_.IsArray(Z.required)){if(Z.required=Z.required.filter((Q)=>X.includes(Q)),Z.required.length===0)delete Z.required}for(let Q of Object.getOwnPropertyNames(Z.properties))if(!X.includes(Q))delete Z.properties[Q];return this.Create(Z)},Y)}Record($,J,Y={}){if(F.TTemplateLiteral($)){const X=C$.ParseExact($.pattern);return I$.Check(X)?this.Object([...b$.Generate(X)].reduce((Z,Q)=>({...Z,[Q]:g.Clone(J)}),{}),Y):this.Create({...Y,[n4.Kind]:"Record",type:"object",patternProperties:{[$.pattern]:g.Clone(J)}})}else if(F.TUnion($)){const X=f1.Resolve($);if(F.TUnionLiteral(X)){const Z=X.anyOf.reduce((Q,q)=>({...Q,[q.const]:g.Clone(J)}),{});return this.Object(Z,{...Y,[n4.Hint]:"Record"})}else throw Error("StandardTypeBuilder: Record key of type union contains non-literal types")}else if(F.TLiteral($))if(_.IsString($.const)||_.IsNumber($.const))return this.Object({[$.const]:g.Clone(J)},Y);else throw Error("StandardTypeBuilder: Record key of type literal is not of type string or number");else if(F.TInteger($)||F.TNumber($))return this.Create({...Y,[n4.Kind]:"Record",type:"object",patternProperties:{[n4.PatternNumberExact]:g.Clone(J)}});else if(F.TString($)){const X=_.IsUndefined($.pattern)?n4.PatternStringExact:$.pattern;return this.Create({...Y,[n4.Kind]:"Record",type:"object",patternProperties:{[X]:g.Clone(J)}})}else throw Error("StandardTypeBuilder: Record key is an invalid type")}Recursive($,J={}){if(_.IsUndefined(J.$id))J.$id=`T${c6++}`;const Y=$({[n4.Kind]:"This",$ref:`${J.$id}`});return Y.$id=J.$id,this.Create({...J,[n4.Hint]:"Recursive",...Y})}Ref($,J={}){if(_.IsString($))return this.Create({...J,[n4.Kind]:"Ref",$ref:$});if(_.IsUndefined($.$id))throw Error("StandardTypeBuilder.Ref: Target type must specify an $id");return this.Create({...J,[n4.Kind]:"Ref",$ref:$.$id})}Required($,J={}){return S$.Map($,(Y)=>{const X=Object.getOwnPropertyNames(Y.properties).reduce((Z,Q)=>{return{...Z,[Q]:this.Discard(Y.properties[Q],n4.Optional)}},{});return this.Object(X,Y)},J)}Rest($){if(F.TTuple($)){if(_.IsUndefined($.items))return[];return $.items.map((J)=>g.Clone(J))}else return[g.Clone($)]}String($={}){return this.Create({...$,[n4.Kind]:"String",type:"string"})}TemplateLiteral($,J={}){const Y=_.IsString($)?X1.Create(T1.Parse($)):X1.Create($);return this.Create({...J,[n4.Kind]:"TemplateLiteral",type:"string",pattern:Y})}Tuple($,J={}){const[Y,X,Z]=[!1,$.length,$.length],Q=$.map((M)=>g.Clone(M)),q=$.length>0?{...J,[n4.Kind]:"Tuple",type:"array",items:Q,additionalItems:Y,minItems:X,maxItems:Z}:{...J,[n4.Kind]:"Tuple",type:"array",minItems:X,maxItems:Z};return this.Create(q)}Uncapitalize($,J={}){return{...j$.Map(g.Clone($),"Uncapitalize"),...J}}Union($,J={}){if(F.TTemplateLiteral($))return v0.Resolve($);else{const Y=$;if(Y.length===0)return this.Never(J);if(Y.length===1)return this.Create(g.Clone(Y[0],J));const X=Y.map((Z)=>g.Clone(Z));return this.Create({...J,[n4.Kind]:"Union",anyOf:X})}}Unknown($={}){return this.Create({...$,[n4.Kind]:"Unknown"})}Unsafe($={}){return this.Create({...$,[n4.Kind]:$[n4.Kind]||"Unsafe"})}Uppercase($,J={}){return{...j$.Map(g.Clone($),"Uppercase"),...J}}}n4.StandardTypeBuilder=W1;class y1 extends W1{AsyncIterator($,J={}){return this.Create({...J,[n4.Kind]:"AsyncIterator",type:"AsyncIterator",items:g.Clone($)})}Awaited($,J={}){const Y=(X)=>{if(X.length===0)return X;const[Z,...Q]=X;return[this.Awaited(Z),...Y(Q)]};return F.TIntersect($)?n4.Type.Intersect(Y($.allOf)):F.TUnion($)?n4.Type.Union(Y($.anyOf)):F.TPromise($)?this.Awaited($.item):g.Clone($,J)}BigInt($={}){return this.Create({...$,[n4.Kind]:"BigInt",type:"bigint"})}ConstructorParameters($,J={}){return this.Tuple([...$.parameters],{...J})}Constructor($,J,Y){const X=g.Clone(J),Z=$.map((Q)=>g.Clone(Q));return this.Create({...Y,[n4.Kind]:"Constructor",type:"constructor",parameters:Z,returns:X})}Date($={}){return this.Create({...$,[n4.Kind]:"Date",type:"Date"})}Function($,J,Y){const X=g.Clone(J,{}),Z=$.map((Q)=>g.Clone(Q));return this.Create({...Y,[n4.Kind]:"Function",type:"function",parameters:Z,returns:X})}InstanceType($,J={}){return g.Clone($.returns,J)}Iterator($,J={}){return this.Create({...J,[n4.Kind]:"Iterator",type:"Iterator",items:g.Clone($)})}Parameters($,J={}){return this.Tuple($.parameters,{...J})}Promise($,J={}){return this.Create({...J,[n4.Kind]:"Promise",type:"Promise",item:g.Clone($)})}RegExp($,J={}){const Y=_.IsString($)?$:$.source;return this.Create({...J,[n4.Kind]:"String",type:"string",pattern:Y})}RegEx($,J={}){return this.RegExp($,J)}ReturnType($,J={}){return g.Clone($.returns,J)}Symbol($){return this.Create({...$,[n4.Kind]:"Symbol",type:"symbol"})}Undefined($={}){return this.Create({...$,[n4.Kind]:"Undefined",type:"undefined"})}Uint8Array($={}){return this.Create({...$,[n4.Kind]:"Uint8Array",type:"Uint8Array"})}Void($={}){return this.Create({...$,[n4.Kind]:"Void",type:"void"})}}n4.ExtendedTypeBuilder=y1;n4.StandardType=new W1;n4.Type=new y1});var l4=l((c4)=>{Object.defineProperty(c4,"__esModule",{value:!0});c4.TypeSystem=c4.TypeSystemDuplicateFormat=c4.TypeSystemDuplicateTypeKind=void 0;var _$=G0();class m1 extends Error{constructor($){super(`Duplicate type kind '${$}' detected`)}}c4.TypeSystemDuplicateTypeKind=m1;class o1 extends Error{constructor($){super(`Duplicate string format '${$}' detected`)}}c4.TypeSystemDuplicateFormat=o1;var u4;(function($){$.ExactOptionalPropertyTypes=!1,$.AllowArrayObjects=!1,$.AllowNaN=!1,$.AllowVoidNull=!1;function J(X,Z){if(_$.TypeRegistry.Has(X))throw new m1(X);return _$.TypeRegistry.Set(X,Z),(Q={})=>_$.Type.Unsafe({...Q,[_$.Kind]:X})}$.Type=J;function Y(X,Z){if(_$.FormatRegistry.Has(X))throw new o1(X);return _$.FormatRegistry.Set(X,Z),X}$.Format=Y})(u4||(c4.TypeSystem=u4={}))});var i$=l((q$)=>{var LJ=q$&&q$.__createBinding||(Object.create?function($,J,Y,X){if(X===void 0)X=Y;var Z=Object.getOwnPropertyDescriptor(J,Y);if(!Z||("get"in Z?!J.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty($,X,Z)}:function($,J,Y,X){if(X===void 0)X=Y;$[X]=J[Y]}),OJ=q$&&q$.__exportStar||function($,J){for(var Y in $)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))LJ(J,$,Y)};Object.defineProperty(q$,"__esModule",{value:!0});OJ(l4(),q$)});var L0=l((Y8)=>{var CJ=function($){return z1($)&&(Symbol.asyncIterator in $)},IJ=function($){return z1($)&&(Symbol.iterator in $)},bJ=function($){return ArrayBuffer.isView($)},_J=function($){return $ instanceof Promise},RJ=function($){return $ instanceof Uint8Array},GJ=function($){return $ instanceof Date},EJ=function($,J){return J in $},xJ=function($){return z1($)&&$8($.constructor)&&$.constructor.name==="Object"},z1=function($){return $!==null&&typeof $==="object"},VJ=function($){return Array.isArray($)&&!ArrayBuffer.isView($)},t4=function($){return $===void 0},s4=function($){return $===null},r4=function($){return typeof $==="boolean"},n1=function($){return typeof $==="number"},kJ=function($){return n1($)&&Number.isInteger($)},a4=function($){return typeof $==="bigint"},e4=function($){return typeof $==="string"},$8=function($){return typeof $==="function"},J8=function($){return typeof $==="symbol"},gJ=function($){return a4($)||r4($)||s4($)||n1($)||e4($)||J8($)||t4($)};Object.defineProperty(Y8,"__esModule",{value:!0});Y8.IsValueType=Y8.IsSymbol=Y8.IsFunction=Y8.IsString=Y8.IsBigInt=Y8.IsInteger=Y8.IsNumber=Y8.IsBoolean=Y8.IsNull=Y8.IsUndefined=Y8.IsArray=Y8.IsObject=Y8.IsPlainObject=Y8.HasPropertyKey=Y8.IsDate=Y8.IsUint8Array=Y8.IsPromise=Y8.IsTypedArray=Y8.IsIterator=Y8.IsAsyncIterator=void 0;Y8.IsAsyncIterator=CJ;Y8.IsIterator=IJ;Y8.IsTypedArray=bJ;Y8.IsPromise=_J;Y8.IsUint8Array=RJ;Y8.IsDate=GJ;Y8.HasPropertyKey=EJ;Y8.IsPlainObject=xJ;Y8.IsObject=z1;Y8.IsArray=VJ;Y8.IsUndefined=t4;Y8.IsNull=s4;Y8.IsBoolean=r4;Y8.IsNumber=n1;Y8.IsInteger=kJ;Y8.IsBigInt=a4;Y8.IsString=e4;Y8.IsFunction=$8;Y8.IsSymbol=J8;Y8.IsValueType=gJ});var p$=l((z8)=>{var XY=function($){H0(K0.Array);for(let J of $)G$(J)},ZY=function($){H0(K0.Boolean),H0($?1:0)},QY=function($){H0(K0.BigInt),Q8.setBigInt64(0,$);for(let J of W8)H0(J)},WY=function($){H0(K0.Date),G$($.getTime())},zY=function($){H0(K0.Null)},HY=function($){H0(K0.Number),Q8.setFloat64(0,$);for(let J of W8)H0(J)},qY=function($){H0(K0.Object);for(let J of globalThis.Object.keys($).sort())G$(J),G$($[J])},MY=function($){H0(K0.String);for(let J=0;J<$.length;J++)H0($.charCodeAt(J))},FY=function($){H0(K0.Symbol),G$($.description)},UY=function($){H0(K0.Uint8Array);for(let J=0;J<$.length;J++)H0($[J])},BY=function($){return H0(K0.Undefined)},G$=function($){if(E0.IsArray($))return XY($);if(E0.IsBoolean($))return ZY($);if(E0.IsBigInt($))return QY($);if(E0.IsDate($))return WY($);if(E0.IsNull($))return zY($);if(E0.IsNumber($))return HY($);if(E0.IsPlainObject($))return qY($);if(E0.IsString($))return MY($);if(E0.IsSymbol($))return FY($);if(E0.IsUint8Array($))return UY($);if(E0.IsUndefined($))return BY($);throw new u1($)},H0=function($){R$=R$^YY[$],R$=R$*$Y%JY},AY=function($){return R$=BigInt("14695981039346656037"),G$($),R$};Object.defineProperty(z8,"__esModule",{value:!0});z8.Hash=z8.ByteMarker=z8.ValueHashError=void 0;var E0=L0();class u1 extends Error{constructor($){super("Hash: Unable to hash value");this.value=$}}z8.ValueHashError=u1;var K0;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(K0||(z8.ByteMarker=K0={}));var R$=BigInt("14695981039346656037"),[$Y,JY]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],YY=Array.from({length:256}).map(($,J)=>BigInt(J)),Z8=new Float64Array(1),Q8=new DataView(Z8.buffer),W8=new Uint8Array(Z8.buffer);z8.Hash=AY});var F8=l((q8)=>{var m=function($){return $!==void 0},KY=function($,J){return H1.TypeSystem.ExactOptionalPropertyTypes?J in $:$[J]!==void 0},t1=function($){const J=s.IsObject($);return H1.TypeSystem.AllowArrayObjects?J:J&&!s.IsArray($)},PY=function($){return t1($)&&!($ instanceof Date)&&!($ instanceof Uint8Array)},c1=function($){const J=s.IsNumber($);return H1.TypeSystem.AllowNaN?J:J&&Number.isFinite($)},jY=function($){const J=s.IsUndefined($);return H1.TypeSystem.AllowVoidNull?J||$===null:J};function*SY($,J,Y,X){}function*LY($,J,Y,X){if(!s.IsArray(X))return yield{type:I.Array,schema:$,path:Y,value:X,message:"Expected array"};if(m($.minItems)&&!(X.length>=$.minItems))yield{type:I.ArrayMinItems,schema:$,path:Y,value:X,message:`Expected array length to be greater or equal to ${$.minItems}`};if(m($.maxItems)&&!(X.length<=$.maxItems))yield{type:I.ArrayMinItems,schema:$,path:Y,value:X,message:`Expected array length to be less or equal to ${$.maxItems}`};for(let q=0;q<X.length;q++)yield*Z0($.items,J,`${Y}/${q}`,X[q]);if($.uniqueItems===!0&&!function(){const q=new Set;for(let M of X){const B=wY.Hash(M);if(q.has(B))return!1;else q.add(B)}return!0}())yield{type:I.ArrayUniqueItems,schema:$,path:Y,value:X,message:"Expected array elements to be unique"};if(!(m($.contains)||c1($.minContains)||c1($.maxContains)))return;const Z=m($.contains)?$.contains:O0.Type.Never(),Q=X.reduce((q,M,B)=>Z0(Z,J,`${Y}${B}`,M).next().done===!0?q+1:q,0);if(Q===0)yield{type:I.ArrayContains,schema:$,path:Y,value:X,message:"Expected array to contain at least one matching type"};if(s.IsNumber($.minContains)&&Q<$.minContains)yield{type:I.ArrayMinContains,schema:$,path:Y,value:X,message:`Expected array to contain at least ${$.minContains} matching types`};if(s.IsNumber($.maxContains)&&Q>$.maxContains)yield{type:I.ArrayMaxContains,schema:$,path:Y,value:X,message:`Expected array to contain no more than ${$.maxContains} matching types`}}function*OY($,J,Y,X){if(!s.IsAsyncIterator(X))yield{type:I.AsyncIterator,schema:$,path:Y,value:X,message:"Expected value to be an async iterator"}}function*CY($,J,Y,X){if(!s.IsBigInt(X))return yield{type:I.BigInt,schema:$,path:Y,value:X,message:"Expected bigint"};if(m($.multipleOf)&&X%$.multipleOf!==BigInt(0))yield{type:I.BigIntMultipleOf,schema:$,path:Y,value:X,message:`Expected bigint to be a multiple of ${$.multipleOf}`};if(m($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield{type:I.BigIntExclusiveMinimum,schema:$,path:Y,value:X,message:`Expected bigint to be greater than ${$.exclusiveMinimum}`};if(m($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield{type:I.BigIntExclusiveMaximum,schema:$,path:Y,value:X,message:`Expected bigint to be less than ${$.exclusiveMaximum}`};if(m($.minimum)&&!(X>=$.minimum))yield{type:I.BigIntMinimum,schema:$,path:Y,value:X,message:`Expected bigint to be greater or equal to ${$.minimum}`};if(m($.maximum)&&!(X<=$.maximum))yield{type:I.BigIntMaximum,schema:$,path:Y,value:X,message:`Expected bigint to be less or equal to ${$.maximum}`}}function*IY($,J,Y,X){if(!s.IsBoolean(X))return yield{type:I.Boolean,schema:$,path:Y,value:X,message:"Expected boolean"}}function*bY($,J,Y,X){yield*Z0($.returns,J,Y,X.prototype)}function*_Y($,J,Y,X){if(!s.IsDate(X))return yield{type:I.Date,schema:$,path:Y,value:X,message:"Expected Date object"};if(!isFinite(X.getTime()))return yield{type:I.Date,schema:$,path:Y,value:X,message:"Invalid Date"};if(m($.exclusiveMinimumTimestamp)&&!(X.getTime()>$.exclusiveMinimumTimestamp))yield{type:I.DateExclusiveMinimumTimestamp,schema:$,path:Y,value:X,message:`Expected Date timestamp to be greater than ${$.exclusiveMinimum}`};if(m($.exclusiveMaximumTimestamp)&&!(X.getTime()<$.exclusiveMaximumTimestamp))yield{type:I.DateExclusiveMaximumTimestamp,schema:$,path:Y,value:X,message:`Expected Date timestamp to be less than ${$.exclusiveMaximum}`};if(m($.minimumTimestamp)&&!(X.getTime()>=$.minimumTimestamp))yield{type:I.DateMinimumTimestamp,schema:$,path:Y,value:X,message:`Expected Date timestamp to be greater or equal to ${$.minimum}`};if(m($.maximumTimestamp)&&!(X.getTime()<=$.maximumTimestamp))yield{type:I.DateMaximumTimestamp,schema:$,path:Y,value:X,message:`Expected Date timestamp to be less or equal to ${$.maximum}`}}function*RY($,J,Y,X){if(!s.IsFunction(X))return yield{type:I.Function,schema:$,path:Y,value:X,message:"Expected function"}}function*GY($,J,Y,X){if(!s.IsInteger(X))return yield{type:I.Integer,schema:$,path:Y,value:X,message:"Expected integer"};if(m($.multipleOf)&&X%$.multipleOf!==0)yield{type:I.IntegerMultipleOf,schema:$,path:Y,value:X,message:`Expected integer to be a multiple of ${$.multipleOf}`};if(m($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield{type:I.IntegerExclusiveMinimum,schema:$,path:Y,value:X,message:`Expected integer to be greater than ${$.exclusiveMinimum}`};if(m($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield{type:I.IntegerExclusiveMaximum,schema:$,path:Y,value:X,message:`Expected integer to be less than ${$.exclusiveMaximum}`};if(m($.minimum)&&!(X>=$.minimum))yield{type:I.IntegerMinimum,schema:$,path:Y,value:X,message:`Expected integer to be greater or equal to ${$.minimum}`};if(m($.maximum)&&!(X<=$.maximum))yield{type:I.IntegerMaximum,schema:$,path:Y,value:X,message:`Expected integer to be less or equal to ${$.maximum}`}}function*EY($,J,Y,X){for(let Z of $.allOf){const Q=Z0(Z,J,Y,X).next();if(!Q.done){yield Q.value,yield{type:I.Intersect,schema:$,path:Y,value:X,message:"Expected all sub schemas to be valid"};return}}if($.unevaluatedProperties===!1){const Z=new RegExp(O0.KeyResolver.ResolvePattern($));for(let Q of Object.getOwnPropertyNames(X))if(!Z.test(Q))yield{type:I.IntersectUnevaluatedProperties,schema:$,path:`${Y}/${Q}`,value:X,message:"Unexpected property"}}if(typeof $.unevaluatedProperties==="object"){const Z=new RegExp(O0.KeyResolver.ResolvePattern($));for(let Q of Object.getOwnPropertyNames(X))if(!Z.test(Q)){const q=Z0($.unevaluatedProperties,J,`${Y}/${Q}`,X[Q]).next();if(!q.done){yield q.value,yield{type:I.IntersectUnevaluatedProperties,schema:$,path:`${Y}/${Q}`,value:X,message:"Invalid additional property"};return}}}}function*xY($,J,Y,X){if(!(t1(X)&&(Symbol.iterator in X)))yield{type:I.Iterator,schema:$,path:Y,value:X,message:"Expected value to be an iterator"}}function*VY($,J,Y,X){if(X!==$.const){const Z=typeof $.const==="string"?`'${$.const}'`:$.const;return yield{type:I.Literal,schema:$,path:Y,value:X,message:`Expected ${Z}`}}}function*kY($,J,Y,X){yield{type:I.Never,schema:$,path:Y,value:X,message:"Value cannot be validated"}}function*gY($,J,Y,X){if(Z0($.not,J,Y,X).next().done===!0)yield{type:I.Not,schema:$,path:Y,value:X,message:"Value should not validate"}}function*fY($,J,Y,X){if(!s.IsNull(X))return yield{type:I.Null,schema:$,path:Y,value:X,message:"Expected null"}}function*TY($,J,Y,X){if(!c1(X))return yield{type:I.Number,schema:$,path:Y,value:X,message:"Expected number"};if(m($.multipleOf)&&X%$.multipleOf!==0)yield{type:I.NumberMultipleOf,schema:$,path:Y,value:X,message:`Expected number to be a multiple of ${$.multipleOf}`};if(m($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield{type:I.NumberExclusiveMinimum,schema:$,path:Y,value:X,message:`Expected number to be greater than ${$.exclusiveMinimum}`};if(m($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield{type:I.NumberExclusiveMaximum,schema:$,path:Y,value:X,message:`Expected number to be less than ${$.exclusiveMaximum}`};if(m($.minimum)&&!(X>=$.minimum))yield{type:I.NumberMinimum,schema:$,path:Y,value:X,message:`Expected number to be greater or equal to ${$.minimum}`};if(m($.maximum)&&!(X<=$.maximum))yield{type:I.NumberMaximum,schema:$,path:Y,value:X,message:`Expected number to be less or equal to ${$.maximum}`}}function*dY($,J,Y,X){if(!t1(X))return yield{type:I.Object,schema:$,path:Y,value:X,message:"Expected object"};if(m($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))yield{type:I.ObjectMinProperties,schema:$,path:Y,value:X,message:`Expected object to have at least ${$.minProperties} properties`};if(m($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))yield{type:I.ObjectMaxProperties,schema:$,path:Y,value:X,message:`Expected object to have no more than ${$.maxProperties} properties`};const Z=Array.isArray($.required)?$.required:[],Q=Object.getOwnPropertyNames($.properties),q=Object.getOwnPropertyNames(X);for(let M of Q){const B=$.properties[M];if($.required&&$.required.includes(M)){if(yield*Z0(B,J,`${Y}/${M}`,X[M]),O0.ExtendsUndefined.Check($)&&!(M in X))yield{type:I.ObjectRequiredProperties,schema:B,path:`${Y}/${M}`,value:void 0,message:"Expected required property"}}else if(KY(X,M))yield*Z0(B,J,`${Y}/${M}`,X[M])}for(let M of Z){if(q.includes(M))continue;yield{type:I.ObjectRequiredProperties,schema:$.properties[M],path:`${Y}/${M}`,value:void 0,message:"Expected required property"}}if($.additionalProperties===!1){for(let M of q)if(!Q.includes(M))yield{type:I.ObjectAdditionalProperties,schema:$,path:`${Y}/${M}`,value:X[M],message:"Unexpected property"}}if(typeof $.additionalProperties==="object")for(let M of q){if(Q.includes(M))continue;yield*Z0($.additionalProperties,J,`${Y}/${M}`,X[M])}}function*yY($,J,Y,X){if(!s.IsPromise(X))yield{type:I.Promise,schema:$,path:Y,value:X,message:"Expected Promise"}}function*vY($,J,Y,X){if(!PY(X))return yield{type:I.Object,schema:$,path:Y,value:X,message:"Expected record object"};if(m($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))yield{type:I.ObjectMinProperties,schema:$,path:Y,value:X,message:`Expected object to have at least ${$.minProperties} properties`};if(m($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))yield{type:I.ObjectMaxProperties,schema:$,path:Y,value:X,message:`Expected object to have no more than ${$.maxProperties} properties`};const[Z,Q]=Object.entries($.patternProperties)[0],q=new RegExp(Z);for(let[M,B]of Object.entries(X)){if(q.test(M)){yield*Z0(Q,J,`${Y}/${M}`,B);continue}if(typeof $.additionalProperties==="object")yield*Z0($.additionalProperties,J,`${Y}/${M}`,B);if($.additionalProperties===!1){const D=`${Y}/${M}`,N=`Unexpected property '${D}'`;return yield{type:I.ObjectAdditionalProperties,schema:$,path:D,value:B,message:N}}}}function*iY($,J,Y,X){const Z=J.findIndex((q)=>q.$id===$.$ref);if(Z===-1)throw new q1($);const Q=J[Z];yield*Z0(Q,J,Y,X)}function*pY($,J,Y,X){if(!s.IsString(X))return yield{type:I.String,schema:$,path:Y,value:X,message:"Expected string"};if(m($.minLength)&&!(X.length>=$.minLength))yield{type:I.StringMinLength,schema:$,path:Y,value:X,message:`Expected string length greater or equal to ${$.minLength}`};if(m($.maxLength)&&!(X.length<=$.maxLength))yield{type:I.StringMaxLength,schema:$,path:Y,value:X,message:`Expected string length less or equal to ${$.maxLength}`};if(s.IsString($.pattern)){if(!new RegExp($.pattern).test(X))yield{type:I.StringPattern,schema:$,path:Y,value:X,message:`Expected string to match pattern ${$.pattern}`}}if(s.IsString($.format)){if(!O0.FormatRegistry.Has($.format))yield{type:I.StringFormatUnknown,schema:$,path:Y,value:X,message:`Unknown string format '${$.format}'`};else if(!O0.FormatRegistry.Get($.format)(X))yield{type:I.StringFormat,schema:$,path:Y,value:X,message:`Expected string to match format '${$.format}'`}}}function*mY($,J,Y,X){if(!s.IsSymbol(X))return yield{type:I.Symbol,schema:$,path:Y,value:X,message:"Expected symbol"}}function*oY($,J,Y,X){if(!s.IsString(X))return yield{type:I.String,schema:$,path:Y,value:X,message:"Expected string"};if(!new RegExp($.pattern).test(X))yield{type:I.StringPattern,schema:$,path:Y,value:X,message:`Expected string to match pattern ${$.pattern}`}}function*nY($,J,Y,X){const Z=J.findIndex((q)=>q.$id===$.$ref);if(Z===-1)throw new q1($);const Q=J[Z];yield*Z0(Q,J,Y,X)}function*uY($,J,Y,X){if(!s.IsArray(X))return yield{type:I.Array,schema:$,path:Y,value:X,message:"Expected Array"};if($.items===void 0&&X.length!==0)return yield{type:I.TupleZeroLength,schema:$,path:Y,value:X,message:"Expected tuple to have 0 elements"};if(X.length!==$.maxItems)yield{type:I.TupleLength,schema:$,path:Y,value:X,message:`Expected tuple to have ${$.maxItems} elements`};if(!$.items)return;for(let Z=0;Z<$.items.length;Z++)yield*Z0($.items[Z],J,`${Y}/${Z}`,X[Z])}function*cY($,J,Y,X){if(X!==void 0)yield{type:I.Undefined,schema:$,path:Y,value:X,message:"Expected undefined"}}function*hY($,J,Y,X){const Z=[];for(let Q of $.anyOf){const q=[...Z0(Q,J,Y,X)];if(q.length===0)return;Z.push(...q)}if(Z.length>0)yield{type:I.Union,schema:$,path:Y,value:X,message:"Expected value of union"};for(let Q of Z)yield Q}function*lY($,J,Y,X){if(!s.IsUint8Array(X))return yield{type:I.Uint8Array,schema:$,path:Y,value:X,message:"Expected Uint8Array"};if(m($.maxByteLength)&&!(X.length<=$.maxByteLength))yield{type:I.Uint8ArrayMaxByteLength,schema:$,path:Y,value:X,message:`Expected Uint8Array to have a byte length less or equal to ${$.maxByteLength}`};if(m($.minByteLength)&&!(X.length>=$.minByteLength))yield{type:I.Uint8ArrayMinByteLength,schema:$,path:Y,value:X,message:`Expected Uint8Array to have a byte length greater or equal to ${$.maxByteLength}`}}function*tY($,J,Y,X){}function*sY($,J,Y,X){if(!jY(X))return yield{type:I.Void,schema:$,path:Y,value:X,message:"Expected void"}}function*rY($,J,Y,X){if(!O0.TypeRegistry.Get($[O0.Kind])($,X))return yield{type:I.Kind,schema:$,path:Y,value:X,message:`Expected kind ${$[O0.Kind]}`}}function*Z0($,J,Y,X){const Z=m($.$id)?[...J,$]:J,Q=$;switch(Q[O0.Kind]){case"Any":return yield*SY(Q,Z,Y,X);case"Array":return yield*LY(Q,Z,Y,X);case"AsyncIterator":return yield*OY(Q,Z,Y,X);case"BigInt":return yield*CY(Q,Z,Y,X);case"Boolean":return yield*IY(Q,Z,Y,X);case"Constructor":return yield*bY(Q,Z,Y,X);case"Date":return yield*_Y(Q,Z,Y,X);case"Function":return yield*RY(Q,Z,Y,X);case"Integer":return yield*GY(Q,Z,Y,X);case"Intersect":return yield*EY(Q,Z,Y,X);case"Iterator":return yield*xY(Q,Z,Y,X);case"Literal":return yield*VY(Q,Z,Y,X);case"Never":return yield*kY(Q,Z,Y,X);case"Not":return yield*gY(Q,Z,Y,X);case"Null":return yield*fY(Q,Z,Y,X);case"Number":return yield*TY(Q,Z,Y,X);case"Object":return yield*dY(Q,Z,Y,X);case"Promise":return yield*yY(Q,Z,Y,X);case"Record":return yield*vY(Q,Z,Y,X);case"Ref":return yield*iY(Q,Z,Y,X);case"String":return yield*pY(Q,Z,Y,X);case"Symbol":return yield*mY(Q,Z,Y,X);case"TemplateLiteral":return yield*oY(Q,Z,Y,X);case"This":return yield*nY(Q,Z,Y,X);case"Tuple":return yield*uY(Q,Z,Y,X);case"Undefined":return yield*cY(Q,Z,Y,X);case"Union":return yield*hY(Q,Z,Y,X);case"Uint8Array":return yield*lY(Q,Z,Y,X);case"Unknown":return yield*tY(Q,Z,Y,X);case"Void":return yield*sY(Q,Z,Y,X);default:if(!O0.TypeRegistry.Has(Q[O0.Kind]))throw new l1($);return yield*rY(Q,Z,Y,X)}}var aY=function(...$){const J=$.length===3?Z0($[0],$[1],"",$[2]):Z0($[0],[],"",$[1]);return new h1(J)};Object.defineProperty(q8,"__esModule",{value:!0});q8.Errors=q8.ValueErrorsDereferenceError=q8.ValueErrorsUnknownTypeError=q8.ValueErrorIterator=q8.ValueErrorType=void 0;var H1=i$(),O0=G0(),wY=p$(),s=L0(),I;(function($){$[$.Array=0]="Array",$[$.ArrayMinItems=1]="ArrayMinItems",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayContains=3]="ArrayContains",$[$.ArrayMinContains=4]="ArrayMinContains",$[$.ArrayMaxContains=5]="ArrayMaxContains",$[$.ArrayUniqueItems=6]="ArrayUniqueItems",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigInt=8]="BigInt",$[$.BigIntMultipleOf=9]="BigIntMultipleOf",$[$.BigIntExclusiveMinimum=10]="BigIntExclusiveMinimum",$[$.BigIntExclusiveMaximum=11]="BigIntExclusiveMaximum",$[$.BigIntMinimum=12]="BigIntMinimum",$[$.BigIntMaximum=13]="BigIntMaximum",$[$.Boolean=14]="Boolean",$[$.Date=15]="Date",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateExclusiveMaximumTimestamp=17]="DateExclusiveMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMaximumTimestamp=19]="DateMaximumTimestamp",$[$.Function=20]="Function",$[$.Integer=21]="Integer",$[$.IntegerMultipleOf=22]="IntegerMultipleOf",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerExclusiveMaximum=24]="IntegerExclusiveMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMaximum=26]="IntegerMaximum",$[$.Intersect=27]="Intersect",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Iterator=29]="Iterator",$[$.Literal=30]="Literal",$[$.Never=31]="Never",$[$.Not=32]="Not",$[$.Null=33]="Null",$[$.Number=34]="Number",$[$.NumberMultipleOf=35]="NumberMultipleOf",$[$.NumberExclusiveMinimum=36]="NumberExclusiveMinimum",$[$.NumberExclusiveMaximum=37]="NumberExclusiveMaximum",$[$.NumberMinimum=38]="NumberMinimum",$[$.NumberMaximum=39]="NumberMaximum",$[$.Object=40]="Object",$[$.ObjectMinProperties=41]="ObjectMinProperties",$[$.ObjectMaxProperties=42]="ObjectMaxProperties",$[$.ObjectAdditionalProperties=43]="ObjectAdditionalProperties",$[$.ObjectRequiredProperties=44]="ObjectRequiredProperties",$[$.Promise=45]="Promise",$[$.RecordKeyNumeric=46]="RecordKeyNumeric",$[$.RecordKeyString=47]="RecordKeyString",$[$.String=48]="String",$[$.StringMinLength=49]="StringMinLength",$[$.StringMaxLength=50]="StringMaxLength",$[$.StringPattern=51]="StringPattern",$[$.StringFormatUnknown=52]="StringFormatUnknown",$[$.StringFormat=53]="StringFormat",$[$.Symbol=54]="Symbol",$[$.TupleZeroLength=55]="TupleZeroLength",$[$.TupleLength=56]="TupleLength",$[$.Undefined=57]="Undefined",$[$.Union=58]="Union",$[$.Uint8Array=59]="Uint8Array",$[$.Uint8ArrayMinByteLength=60]="Uint8ArrayMinByteLength",$[$.Uint8ArrayMaxByteLength=61]="Uint8ArrayMaxByteLength",$[$.Void=62]="Void",$[$.Kind=63]="Kind"})(I||(q8.ValueErrorType=I={}));class h1{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){const $=this.iterator.next();return $.done?void 0:$.value}}q8.ValueErrorIterator=h1;class l1 extends Error{constructor($){super("ValueErrors: Unknown type");this.schema=$}}q8.ValueErrorsUnknownTypeError=l1;class q1 extends Error{constructor($){super(`ValueErrors: Unable to dereference type with \$id '${$.$ref}'`);this.schema=$}}q8.ValueErrorsDereferenceError=q1;q8.Errors=aY});var m$=l((M$)=>{var XX=M$&&M$.__createBinding||(Object.create?function($,J,Y,X){if(X===void 0)X=Y;var Z=Object.getOwnPropertyDescriptor(J,Y);if(!Z||("get"in Z?!J.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty($,X,Z)}:function($,J,Y,X){if(X===void 0)X=Y;$[X]=J[Y]}),ZX=M$&&M$.__exportStar||function($,J){for(var Y in $)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))XX(J,$,Y)};Object.defineProperty(M$,"__esModule",{value:!0});ZX(F8(),M$)});var M1=l((B8)=>{Object.defineProperty(B8,"__esModule",{value:!0});B8.ValuePointer=B8.ValuePointerRootDeleteError=B8.ValuePointerRootSetError=void 0;class s1 extends Error{constructor($,J,Y){super("ValuePointer: Cannot set root value");this.value=$,this.path=J,this.update=Y}}B8.ValuePointerRootSetError=s1;class r1 extends Error{constructor($,J){super("ValuePointer: Cannot delete root value");this.value=$,this.path=J}}B8.ValuePointerRootDeleteError=r1;var U8;(function($){function J(M){return M.indexOf("~")===-1?M:M.replace(/~1/g,"/").replace(/~0/g,"~")}function*Y(M){if(M==="")return;let[B,D]=[0,0];for(let N=0;N<M.length;N++)if(M.charAt(N)==="/")if(N===0)B=N+1;else D=N,yield J(M.slice(B,D)),B=N+1;else D=N;yield J(M.slice(B))}$.Format=Y;function X(M,B,D){if(B==="")throw new s1(M,B,D);let[N,P,w]=[null,M,""];for(let A of Y(B)){if(P[A]===void 0)P[A]={};N=P,P=P[A],w=A}N[w]=D}$.Set=X;function Z(M,B){if(B==="")throw new r1(M,B);let[D,N,P]=[null,M,""];for(let w of Y(B)){if(N[w]===void 0||N[w]===null)return;D=N,N=N[w],P=w}if(Array.isArray(D)){const w=parseInt(P);D.splice(w,1)}else delete D[P]}$.Delete=Z;function Q(M,B){if(B==="")return!0;let[D,N,P]=[null,M,""];for(let w of Y(B)){if(N[w]===void 0)return!1;D=N,N=N[w],P=w}return Object.getOwnPropertyNames(D).includes(P)}$.Has=Q;function q(M,B){if(B==="")return M;let D=M;for(let N of Y(B)){if(D[N]===void 0)return;D=D[N]}return D}$.Get=q})(U8||(B8.ValuePointer=U8={}))});var E$=l((N8)=>{var zX=function($){return[...Object.getOwnPropertyNames($),...Object.getOwnPropertySymbols($)].reduce((Y,X)=>({...Y,[X]:a1($[X])}),{})},HX=function($){return $.map((J)=>a1(J))},qX=function($){return $.slice()},MX=function($){return new Date($.toISOString())},FX=function($){return $},UX=function($){return $},BX=function($){return $},AX=function($){return $},NX=function($){return $},a1=function($){if(i0.IsArray($))return HX($);if(i0.IsAsyncIterator($))return UX($);if(i0.IsFunction($))return AX($);if(i0.IsIterator($))return BX($);if(i0.IsPromise($))return NX($);if(i0.IsDate($))return MX($);if(i0.IsPlainObject($))return zX($);if(i0.IsTypedArray($))return qX($);if(i0.IsValueType($))return FX($);throw new Error("ValueClone: Unable to clone value")};Object.defineProperty(N8,"__esModule",{value:!0});N8.Clone=void 0;var i0=L0();N8.Clone=a1});var Y4=l((P8)=>{var o$=function($,J){return{type:"update",path:$,value:J}},w8=function($,J){return{type:"insert",path:$,value:J}},K8=function($){return{type:"delete",path:$}};function*DX($,J,Y){if(!q0.IsPlainObject(Y))return yield o$($,Y);const X=[...Object.keys(J),...Object.getOwnPropertySymbols(J)],Z=[...Object.keys(Y),...Object.getOwnPropertySymbols(Y)];for(let Q of X){if(q0.IsSymbol(Q))throw new x$(Q);if(q0.IsUndefined(Y[Q])&&Z.includes(Q))yield o$(`${$}/${String(Q)}`,void 0)}for(let Q of Z){if(q0.IsUndefined(J[Q])||q0.IsUndefined(Y[Q]))continue;if(q0.IsSymbol(Q))throw new x$(Q);yield*F1(`${$}/${String(Q)}`,J[Q],Y[Q])}for(let Q of Z){if(q0.IsSymbol(Q))throw new x$(Q);if(q0.IsUndefined(J[Q]))yield w8(`${$}/${String(Q)}`,Y[Q])}for(let Q of X.reverse()){if(q0.IsSymbol(Q))throw new x$(Q);if(q0.IsUndefined(Y[Q])&&!Z.includes(Q))yield K8(`${$}/${String(Q)}`)}}function*wX($,J,Y){if(!q0.IsArray(Y))return yield o$($,Y);for(let X=0;X<Math.min(J.length,Y.length);X++)yield*F1(`${$}/${X}`,J[X],Y[X]);for(let X=0;X<Y.length;X++){if(X<J.length)continue;yield w8(`${$}/${X}`,Y[X])}for(let X=J.length-1;X>=0;X--){if(X<Y.length)continue;yield K8(`${$}/${X}`)}}function*KX($,J,Y){if(!q0.IsTypedArray(Y)||J.length!==Y.length||Object.getPrototypeOf(J).constructor.name!==Object.getPrototypeOf(Y).constructor.name)return yield o$($,Y);for(let X=0;X<Math.min(J.length,Y.length);X++)yield*F1(`${$}/${X}`,J[X],Y[X])}function*PX($,J,Y){if(J===Y)return;yield o$($,Y)}function*F1($,J,Y){if(q0.IsPlainObject(J))return yield*DX($,J,Y);if(q0.IsArray(J))return yield*wX($,J,Y);if(q0.IsTypedArray(J))return yield*KX($,J,Y);if(q0.IsValueType(J))return yield*PX($,J,Y);throw new J4(J)}var jX=function($,J){return[...F1("",$,J)]},SX=function($){return $.length>0&&$[0].path===""&&$[0].type==="update"},LX=function($){return $.length===0},OX=function($,J){if(SX(J))return $4.Clone(J[0].value);if(LX(J))return $4.Clone($);const Y=$4.Clone($);for(let X of J)switch(X.type){case"insert":{e1.ValuePointer.Set(Y,X.path,X.value);break}case"update":{e1.ValuePointer.Set(Y,X.path,X.value);break}case"delete":{e1.ValuePointer.Delete(Y,X.path);break}}return Y};Object.defineProperty(P8,"__esModule",{value:!0});P8.Patch=P8.Diff=P8.ValueDeltaUnableToDiffUnknownValue=P8.ValueDeltaObjectWithSymbolKeyError=P8.Edit=P8.Delete=P8.Update=P8.Insert=void 0;var C0=G0(),e1=M1(),q0=L0(),$4=E$();P8.Insert=C0.Type.Object({type:C0.Type.Literal("insert"),path:C0.Type.String(),value:C0.Type.Unknown()});P8.Update=C0.Type.Object({type:C0.Type.Literal("update"),path:C0.Type.String(),value:C0.Type.Unknown()});P8.Delete=C0.Type.Object({type:C0.Type.Literal("delete"),path:C0.Type.String()});P8.Edit=C0.Type.Union([P8.Insert,P8.Update,P8.Delete]);class x$ extends Error{constructor($){super("ValueDelta: Cannot diff objects with symbol keys");this.key=$}}P8.ValueDeltaObjectWithSymbolKeyError=x$;class J4 extends Error{constructor($){super("ValueDelta: Unable to create diff edits for unknown value");this.value=$}}P8.ValueDeltaUnableToDiffUnknownValue=J4;P8.Diff=jX;P8.Patch=OX});var _8=l((I8)=>{var RX=function($,J,Y,X){if(!P0.IsPlainObject(Y))U1.ValuePointer.Set($,J,X4.Clone(X));else{const Z=Object.keys(Y),Q=Object.keys(X);for(let q of Z)if(!Q.includes(q))delete Y[q];for(let q of Q)if(!Z.includes(q))Y[q]=null;for(let q of Q)W4($,`${J}/${q}`,Y[q],X[q])}},GX=function($,J,Y,X){if(!P0.IsArray(Y))U1.ValuePointer.Set($,J,X4.Clone(X));else{for(let Z=0;Z<X.length;Z++)W4($,`${J}/${Z}`,Y[Z],X[Z]);Y.splice(X.length)}},EX=function($,J,Y,X){if(P0.IsTypedArray(Y)&&Y.length===X.length)for(let Z=0;Z<Y.length;Z++)Y[Z]=X[Z];else U1.ValuePointer.Set($,J,X4.Clone(X))},xX=function($,J,Y,X){if(Y===X)return;U1.ValuePointer.Set($,J,X)},W4=function($,J,Y,X){if(P0.IsArray(X))return GX($,J,Y,X);if(P0.IsTypedArray(X))return EX($,J,Y,X);if(P0.IsPlainObject(X))return RX($,J,Y,X);if(P0.IsValueType(X))return xX($,J,Y,X)},C8=function($){return P0.IsTypedArray($)||P0.IsValueType($)},VX=function($,J){return P0.IsPlainObject($)&&P0.IsArray(J)||P0.IsArray($)&&P0.IsPlainObject(J)},kX=function($,J){if(C8($)||C8(J))throw new Q4;if(VX($,J))throw new Z4;W4($,"",$,J)};Object.defineProperty(I8,"__esModule",{value:!0});I8.Mutate=I8.ValueMutateInvalidRootMutationError=I8.ValueMutateTypeMismatchError=void 0;var U1=M1(),X4=E$(),P0=L0();class Z4 extends Error{constructor(){super("ValueMutate: Cannot assign due type mismatch of assignable values")}}I8.ValueMutateTypeMismatchError=Z4;class Q4 extends Error{constructor(){super("ValueMutate: Only object and array types can be mutated at the root level")}}I8.ValueMutateInvalidRootMutationError=Q4;I8.Mutate=kX});var E8=l((R8)=>{var TX=function($,J){if(!p0.IsPlainObject(J))return!1;const Y=[...Object.keys($),...Object.getOwnPropertySymbols($)],X=[...Object.keys(J),...Object.getOwnPropertySymbols(J)];if(Y.length!==X.length)return!1;return Y.every((Z)=>B1($[Z],J[Z]))},dX=function($,J){return p0.IsDate(J)&&$.getTime()===J.getTime()},yX=function($,J){if(!p0.IsArray(J)||$.length!==J.length)return!1;return $.every((Y,X)=>B1(Y,J[X]))},vX=function($,J){if(!p0.IsTypedArray(J)||$.length!==J.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(J).constructor.name)return!1;return $.every((Y,X)=>B1(Y,J[X]))},iX=function($,J){return $===J},B1=function($,J){if(p0.IsPlainObject($))return TX($,J);if(p0.IsDate($))return dX($,J);if(p0.IsTypedArray($))return vX($,J);if(p0.IsArray($))return yX($,J);if(p0.IsValueType($))return iX($,J);throw new Error("ValueEquals: Unable to compare value")};Object.defineProperty(R8,"__esModule",{value:!0});R8.Equal=void 0;var p0=L0();R8.Equal=B1});var n$=l((x8)=>{var mX=function($){return $[$0.Kind]==="Any"||$[$0.Kind]==="Unknown"},v=function($){return $!==void 0},oX=function($,J){return A1.TypeSystem.ExactOptionalPropertyTypes?J in $:$[J]!==void 0},D1=function($){const J=m0.IsObject($);return A1.TypeSystem.AllowArrayObjects?J:J&&!m0.IsArray($)},nX=function($){return D1($)&&!($ instanceof Date)&&!($ instanceof Uint8Array)},V$=function($){const J=m0.IsNumber($);return A1.TypeSystem.AllowNaN?J:J&&Number.isFinite($)},uX=function($){const J=m0.IsUndefined($);return A1.TypeSystem.AllowVoidNull?J||$===null:J},cX=function($,J,Y){return!0},hX=function($,J,Y){if(!Array.isArray(Y))return!1;if(v($.minItems)&&!(Y.length>=$.minItems))return!1;if(v($.maxItems)&&!(Y.length<=$.maxItems))return!1;if(!Y.every((Q)=>Q0($.items,J,Q)))return!1;if($.uniqueItems===!0&&!function(){const Q=new Set;for(let q of Y){const M=pX.Hash(q);if(Q.has(M))return!1;else Q.add(M)}return!0}())return!1;if(!(v($.contains)||V$($.minContains)||V$($.maxContains)))return!0;const X=v($.contains)?$.contains:$0.Type.Never(),Z=Y.reduce((Q,q)=>Q0(X,J,q)?Q+1:Q,0);if(Z===0)return!1;if(V$($.minContains)&&Z<$.minContains)return!1;if(V$($.maxContains)&&Z>$.maxContains)return!1;return!0},lX=function($,J,Y){return D1(Y)&&(Symbol.asyncIterator in Y)},tX=function($,J,Y){if(!m0.IsBigInt(Y))return!1;if(v($.multipleOf)&&Y%$.multipleOf!==BigInt(0))return!1;if(v($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(v($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(v($.minimum)&&!(Y>=$.minimum))return!1;if(v($.maximum)&&!(Y<=$.maximum))return!1;return!0},sX=function($,J,Y){return typeof Y==="boolean"},rX=function($,J,Y){return Q0($.returns,J,Y.prototype)},aX=function($,J,Y){if(!(Y instanceof Date))return!1;if(!V$(Y.getTime()))return!1;if(v($.exclusiveMinimumTimestamp)&&!(Y.getTime()>$.exclusiveMinimumTimestamp))return!1;if(v($.exclusiveMaximumTimestamp)&&!(Y.getTime()<$.exclusiveMaximumTimestamp))return!1;if(v($.minimumTimestamp)&&!(Y.getTime()>=$.minimumTimestamp))return!1;if(v($.maximumTimestamp)&&!(Y.getTime()<=$.maximumTimestamp))return!1;return!0},eX=function($,J,Y){return typeof Y==="function"},$Z=function($,J,Y){if(!m0.IsInteger(Y))return!1;if(v($.multipleOf)&&Y%$.multipleOf!==0)return!1;if(v($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(v($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(v($.minimum)&&!(Y>=$.minimum))return!1;if(v($.maximum)&&!(Y<=$.maximum))return!1;return!0},JZ=function($,J,Y){const X=$.allOf.every((Z)=>Q0(Z,J,Y));if($.unevaluatedProperties===!1){const Z=new RegExp($0.KeyResolver.ResolvePattern($)),Q=Object.getOwnPropertyNames(Y).every((q)=>Z.test(q));return X&&Q}else if($0.TypeGuard.TSchema($.unevaluatedProperties)){const Z=new RegExp($0.KeyResolver.ResolvePattern($)),Q=Object.getOwnPropertyNames(Y).every((q)=>Z.test(q)||Q0($.unevaluatedProperties,J,Y[q]));return X&&Q}else return X},YZ=function($,J,Y){return D1(Y)&&(Symbol.iterator in Y)},XZ=function($,J,Y){return Y===$.const},ZZ=function($,J,Y){return!1},QZ=function($,J,Y){return!Q0($.not,J,Y)},WZ=function($,J,Y){return Y===null},zZ=function($,J,Y){if(!V$(Y))return!1;if(v($.multipleOf)&&Y%$.multipleOf!==0)return!1;if(v($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(v($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(v($.minimum)&&!(Y>=$.minimum))return!1;if(v($.maximum)&&!(Y<=$.maximum))return!1;return!0},HZ=function($,J,Y){if(!D1(Y))return!1;if(v($.minProperties)&&!(Object.getOwnPropertyNames(Y).length>=$.minProperties))return!1;if(v($.maxProperties)&&!(Object.getOwnPropertyNames(Y).length<=$.maxProperties))return!1;const X=Object.getOwnPropertyNames($.properties);for(let Z of X){const Q=$.properties[Z];if($.required&&$.required.includes(Z)){if(!Q0(Q,J,Y[Z]))return!1;if(($0.ExtendsUndefined.Check(Q)||mX(Q))&&!(Z in Y))return!1}else if(oX(Y,Z)&&!Q0(Q,J,Y[Z]))return!1}if($.additionalProperties===!1){const Z=Object.getOwnPropertyNames(Y);if($.required&&$.required.length===X.length&&Z.length===X.length)return!0;else return Z.every((Q)=>X.includes(Q))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(Y).every((Q)=>X.includes(Q)||Q0($.additionalProperties,J,Y[Q]));else return!0},qZ=function($,J,Y){return typeof Y==="object"&&typeof Y.then==="function"},MZ=function($,J,Y){if(!nX(Y))return!1;if(v($.minProperties)&&!(Object.getOwnPropertyNames(Y).length>=$.minProperties))return!1;if(v($.maxProperties)&&!(Object.getOwnPropertyNames(Y).length<=$.maxProperties))return!1;const[X,Z]=Object.entries($.patternProperties)[0],Q=new RegExp(X);return Object.entries(Y).every(([q,M])=>{if(Q.test(q))return Q0(Z,J,M);if(typeof $.additionalProperties==="object")return Q0($.additionalProperties,J,M);if($.additionalProperties===!1)return!1;return!0})},FZ=function($,J,Y){const X=J.findIndex((Q)=>Q.$id===$.$ref);if(X===-1)throw new N1($);const Z=J[X];return Q0(Z,J,Y)},UZ=function($,J,Y){if(!m0.IsString(Y))return!1;if(v($.minLength)){if(!(Y.length>=$.minLength))return!1}if(v($.maxLength)){if(!(Y.length<=$.maxLength))return!1}if(v($.pattern)){if(!new RegExp($.pattern).test(Y))return!1}if(v($.format)){if(!$0.FormatRegistry.Has($.format))return!1;return $0.FormatRegistry.Get($.format)(Y)}return!0},BZ=function($,J,Y){if(typeof Y!=="symbol")return!1;return!0},AZ=function($,J,Y){if(!m0.IsString(Y))return!1;return new RegExp($.pattern).test(Y)},NZ=function($,J,Y){const X=J.findIndex((Q)=>Q.$id===$.$ref);if(X===-1)throw new N1($);const Z=J[X];return Q0(Z,J,Y)},DZ=function($,J,Y){if(!m0.IsArray(Y))return!1;if($.items===void 0&&Y.length!==0)return!1;if(Y.length!==$.maxItems)return!1;if(!$.items)return!0;for(let X=0;X<$.items.length;X++)if(!Q0($.items[X],J,Y[X]))return!1;return!0},wZ=function($,J,Y){return Y===void 0},KZ=function($,J,Y){return $.anyOf.some((X)=>Q0(X,J,Y))},PZ=function($,J,Y){if(!(Y instanceof Uint8Array))return!1;if(v($.maxByteLength)&&!(Y.length<=$.maxByteLength))return!1;if(v($.minByteLength)&&!(Y.length>=$.minByteLength))return!1;return!0},jZ=function($,J,Y){return!0},SZ=function($,J,Y){return uX(Y)},LZ=function($,J,Y){if(!$0.TypeRegistry.Has($[$0.Kind]))return!1;return $0.TypeRegistry.Get($[$0.Kind])($,Y)},Q0=function($,J,Y){const X=v($.$id)?[...J,$]:J,Z=$;switch(Z[$0.Kind]){case"Any":return cX(Z,X,Y);case"Array":return hX(Z,X,Y);case"AsyncIterator":return lX(Z,X,Y);case"BigInt":return tX(Z,X,Y);case"Boolean":return sX(Z,X,Y);case"Constructor":return rX(Z,X,Y);case"Date":return aX(Z,X,Y);case"Function":return eX(Z,X,Y);case"Integer":return $Z(Z,X,Y);case"Intersect":return JZ(Z,X,Y);case"Iterator":return YZ(Z,X,Y);case"Literal":return XZ(Z,X,Y);case"Never":return ZZ(Z,X,Y);case"Not":return QZ(Z,X,Y);case"Null":return WZ(Z,X,Y);case"Number":return zZ(Z,X,Y);case"Object":return HZ(Z,X,Y);case"Promise":return qZ(Z,X,Y);case"Record":return MZ(Z,X,Y);case"Ref":return FZ(Z,X,Y);case"String":return UZ(Z,X,Y);case"Symbol":return BZ(Z,X,Y);case"TemplateLiteral":return AZ(Z,X,Y);case"This":return NZ(Z,X,Y);case"Tuple":return DZ(Z,X,Y);case"Undefined":return wZ(Z,X,Y);case"Union":return KZ(Z,X,Y);case"Uint8Array":return PZ(Z,X,Y);case"Unknown":return jZ(Z,X,Y);case"Void":return SZ(Z,X,Y);default:if(!$0.TypeRegistry.Has(Z[$0.Kind]))throw new z4(Z);return LZ(Z,X,Y)}},OZ=function(...$){return $.length===3?Q0($[0],$[1],$[2]):Q0($[0],[],$[1])};Object.defineProperty(x8,"__esModule",{value:!0});x8.Check=x8.ValueCheckDereferenceError=x8.ValueCheckUnknownTypeError=void 0;var A1=i$(),$0=G0(),m0=L0(),pX=p$();class z4 extends Error{constructor($){super(`ValueCheck: ${$[$0.Kind]?`Unknown type '${$[$0.Kind]}'`:"Unknown type"}`);this.schema=$}}x8.ValueCheckUnknownTypeError=z4;class N1 extends Error{constructor($){super(`ValueCheck: Unable to dereference type with \$id '${$.$ref}'`);this.schema=$}}x8.ValueCheckDereferenceError=N1;x8.Check=OZ});var A4=l((f8)=>{var _Z=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else return{}},RZ=function($,J){if($.uniqueItems===!0&&!i.HasPropertyKey($,"default"))throw new Error("ValueCreate.Array: Array with the uniqueItems constraint requires a default value");else if(("contains"in $)&&!i.HasPropertyKey($,"default"))throw new Error("ValueCreate.Array: Array with the contains constraint requires a default value");else if("default"in $)return $.default;else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((Y)=>{return j0($.items,J)});else return[]},GZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else return async function*(){}()},EZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else return BigInt(0)},xZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else return!1},VZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else{const Y=j0($.returns,J);if(typeof Y==="object"&&!Array.isArray(Y))return class{constructor(){for(let[X,Z]of Object.entries(Y)){const Q=this;Q[X]=Z}}};else return class{}}},kZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date(0)},gZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else return()=>j0($.returns,J)},fZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else if($.minimum!==void 0)return $.minimum;else return 0},TZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else{const Y=$.allOf.reduce((X,Z)=>{const Q=j0(Z,J);return typeof Q==="object"?{...X,...Q}:Q},{});if(!bZ.Check($,J,Y))throw new F4($);return Y}},dZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else return function*(){}()},yZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else return $.const},vZ=function($,J){throw new q4($)},iZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else throw new M4($)},pZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else return null},mZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else if($.minimum!==void 0)return $.minimum;else return 0},oZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else{const Y=new Set($.required);return $.default||Object.entries($.properties).reduce((X,[Z,Q])=>{return Y.has(Z)?{...X,[Z]:j0(Q,J)}:{...X}},{})}},nZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else return Promise.resolve(j0($.item,J))},uZ=function($,J){const[Y,X]=Object.entries($.patternProperties)[0];if(i.HasPropertyKey($,"default"))return $.default;else if(!(Y===r0.PatternStringExact||Y===r0.PatternNumberExact))return Y.slice(1,Y.length-1).split("|").reduce((Q,q)=>{return{...Q,[q]:j0(X,J)}},{});else return{}},cZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else{const Y=J.findIndex((Z)=>Z.$id===$.$ref);if(Y===-1)throw new w1($);const X=J[Y];return j0(X,J)}},hZ=function($,J){if($.pattern!==void 0)if(!i.HasPropertyKey($,"default"))throw new Error("ValueCreate.String: String types with patterns must specify a default value");else return $.default;else if($.format!==void 0)if(!i.HasPropertyKey($,"default"))throw new Error("ValueCreate.String: String types with formats must specify a default value");else return $.default;else if(i.HasPropertyKey($,"default"))return $.default;else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>".").join("");else return""},lZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else if("value"in $)return Symbol.for($.value);else return Symbol()},tZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;const Y=r0.TemplateLiteralParser.ParseExact($.pattern);if(!r0.TemplateLiteralFinite.Check(Y))throw new U4($);return r0.TemplateLiteralGenerator.Generate(Y).next().value},sZ=function($,J){if(g8++>k8)throw new B4($,k8);if(i.HasPropertyKey($,"default"))return $.default;else{const Y=J.findIndex((Z)=>Z.$id===$.$ref);if(Y===-1)throw new w1($);const X=J[Y];return j0(X,J)}},rZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((Y,X)=>j0($.items[X],J))},aZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else return},eZ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return j0($.anyOf[0],J)},$Q=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)},JQ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else return{}},YQ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else return},XQ=function($,J){if(i.HasPropertyKey($,"default"))return $.default;else throw new Error("ValueCreate: User defined types must specify a default value")},j0=function($,J){const Y=i.IsString($.$id)?[...J,$]:J,X=$;switch(X[r0.Kind]){case"Any":return _Z(X,Y);case"Array":return RZ(X,Y);case"AsyncIterator":return GZ(X,Y);case"BigInt":return EZ(X,Y);case"Boolean":return xZ(X,Y);case"Constructor":return VZ(X,Y);case"Date":return kZ(X,Y);case"Function":return gZ(X,Y);case"Integer":return fZ(X,Y);case"Intersect":return TZ(X,Y);case"Iterator":return dZ(X,Y);case"Literal":return yZ(X,Y);case"Never":return vZ(X,Y);case"Not":return iZ(X,Y);case"Null":return pZ(X,Y);case"Number":return mZ(X,Y);case"Object":return oZ(X,Y);case"Promise":return nZ(X,Y);case"Record":return uZ(X,Y);case"Ref":return cZ(X,Y);case"String":return hZ(X,Y);case"Symbol":return lZ(X,Y);case"TemplateLiteral":return tZ(X,Y);case"This":return sZ(X,Y);case"Tuple":return rZ(X,Y);case"Undefined":return aZ(X,Y);case"Union":return eZ(X,Y);case"Uint8Array":return $Q(X,Y);case"Unknown":return JQ(X,Y);case"Void":return YQ(X,Y);default:if(!r0.TypeRegistry.Has(X[r0.Kind]))throw new H4(X);return XQ(X,Y)}},ZQ=function(...$){return g8=0,$.length===2?j0($[0],$[1]):j0($[0],[])};Object.defineProperty(f8,"__esModule",{value:!0});f8.Create=f8.ValueCreateRecursiveInstantiationError=f8.ValueCreateDereferenceError=f8.ValueCreateTempateLiteralTypeError=f8.ValueCreateIntersectTypeError=f8.ValueCreateNotTypeError=f8.ValueCreateNeverTypeError=f8.ValueCreateUnknownTypeError=void 0;var r0=G0(),bZ=n$(),i=L0();class H4 extends Error{constructor($){super("ValueCreate: Unknown type");this.schema=$}}f8.ValueCreateUnknownTypeError=H4;class q4 extends Error{constructor($){super("ValueCreate: Never types cannot be created");this.schema=$}}f8.ValueCreateNeverTypeError=q4;class M4 extends Error{constructor($){super("ValueCreate: Not types must have a default value");this.schema=$}}f8.ValueCreateNotTypeError=M4;class F4 extends Error{constructor($){super("ValueCreate: Intersect produced invalid value. Consider using a default value.");this.schema=$}}f8.ValueCreateIntersectTypeError=F4;class U4 extends Error{constructor($){super("ValueCreate: Can only create template literal values from patterns that produce finite sequences. Consider using a default value.");this.schema=$}}f8.ValueCreateTempateLiteralTypeError=U4;class w1 extends Error{constructor($){super(`ValueCreate: Unable to dereference type with \$id '${$.$ref}'`);this.schema=$}}f8.ValueCreateDereferenceError=w1;class B4 extends Error{constructor($,J){super("ValueCreate: Value cannot be created as recursive type may produce value of infinite size. Consider using a default.");this.schema=$,this.recursiveMaxDepth=J}}f8.ValueCreateRecursiveInstantiationError=B4;var k8=512,g8=0;f8.Create=ZQ});var m8=l((i8)=>{var UQ=function($,J,Y){return o.Check($,J,Y)?U0.Clone(Y):u.Create($,J)},BQ=function($,J,Y){if(o.Check($,J,Y))return U0.Clone(Y);const X=a0.IsArray(Y)?U0.Clone(Y):u.Create($,J),Z=a0.IsNumber($.minItems)&&X.length<$.minItems?[...X,...Array.from({length:$.minItems-X.length},()=>null)]:X,q=(a0.IsNumber($.maxItems)&&Z.length>$.maxItems?Z.slice(0,$.maxItems):Z).map((B)=>x0($.items,J,B));if($.uniqueItems!==!0)return q;const M=[...new Set(q)];if(!o.Check($,J,M))throw new D4($,M);return M},AQ=function($,J,Y){return o.Check($,J,Y)?Y:u.Create($,J)},NQ=function($,J,Y){return o.Check($,J,Y)?Y:u.Create($,J)},DQ=function($,J,Y){return o.Check($,J,Y)?Y:u.Create($,J)},wQ=function($,J,Y){if(o.Check($,J,Y))return u.Create($,J);const X=new Set($.returns.required||[]),Z=function(){};for(let[Q,q]of Object.entries($.returns.properties)){if(!X.has(Q)&&Y.prototype[Q]===void 0)continue;Z.prototype[Q]=x0(q,J,Y.prototype[Q])}return Z},KQ=function($,J,Y){return o.Check($,J,Y)?U0.Clone(Y):u.Create($,J)},PQ=function($,J,Y){return o.Check($,J,Y)?Y:u.Create($,J)},jQ=function($,J,Y){return o.Check($,J,Y)?Y:u.Create($,J)},SQ=function($,J,Y){const X=u.Create($,J),Z=a0.IsPlainObject(X)&&a0.IsPlainObject(Y)?{...X,...Y}:Y;return o.Check($,J,Z)?Z:u.Create($,J)},LQ=function($,J,Y){return o.Check($,J,Y)?Y:u.Create($,J)},OQ=function($,J,Y){return o.Check($,J,Y)?Y:u.Create($,J)},CQ=function($,J,Y){throw new w4($)},IQ=function($,J,Y){return o.Check($,J,Y)?Y:u.Create($,J)},bQ=function($,J,Y){return o.Check($,J,Y)?Y:u.Create($,J)},_Q=function($,J,Y){return o.Check($,J,Y)?Y:u.Create($,J)},RQ=function($,J,Y){if(o.Check($,J,Y))return Y;if(Y===null||typeof Y!=="object")return u.Create($,J);const X=new Set($.required||[]),Z={};for(let[Q,q]of Object.entries($.properties)){if(!X.has(Q)&&Y[Q]===void 0)continue;Z[Q]=x0(q,J,Y[Q])}if(typeof $.additionalProperties==="object"){const Q=Object.getOwnPropertyNames($.properties);for(let q of Object.getOwnPropertyNames(Y)){if(Q.includes(q))continue;Z[q]=x0($.additionalProperties,J,Y[q])}}return Z},GQ=function($,J,Y){return o.Check($,J,Y)?Y:u.Create($,J)},EQ=function($,J,Y){if(o.Check($,J,Y))return U0.Clone(Y);if(Y===null||typeof Y!=="object"||Array.isArray(Y)||Y instanceof Date)return u.Create($,J);const X=Object.getOwnPropertyNames($.patternProperties)[0],Z=$.patternProperties[X],Q={};for(let[q,M]of Object.entries(Y))Q[q]=x0(Z,J,M);return Q},xQ=function($,J,Y){const X=J.findIndex((Q)=>Q.$id===$.$ref);if(X===-1)throw new K1($);const Z=J[X];return x0(Z,J,Y)},VQ=function($,J,Y){return o.Check($,J,Y)?Y:u.Create($,J)},kQ=function($,J,Y){return o.Check($,J,Y)?U0.Clone(Y):u.Create($,J)},gQ=function($,J,Y){return o.Check($,J,Y)?U0.Clone(Y):u.Create($,J)},fQ=function($,J,Y){const X=J.findIndex((Q)=>Q.$id===$.$ref);if(X===-1)throw new K1($);const Z=J[X];return x0(Z,J,Y)},TQ=function($,J,Y){if(o.Check($,J,Y))return U0.Clone(Y);if(!a0.IsArray(Y))return u.Create($,J);if($.items===void 0)return[];return $.items.map((X,Z)=>x0(X,J,Y[Z]))},dQ=function($,J,Y){return o.Check($,J,Y)?U0.Clone(Y):u.Create($,J)},yQ=function($,J,Y){return o.Check($,J,Y)?U0.Clone(Y):N4.Create($,J,Y)},vQ=function($,J,Y){return o.Check($,J,Y)?U0.Clone(Y):u.Create($,J)},iQ=function($,J,Y){return o.Check($,J,Y)?U0.Clone(Y):u.Create($,J)},pQ=function($,J,Y){return o.Check($,J,Y)?U0.Clone(Y):u.Create($,J)},mQ=function($,J,Y){return o.Check($,J,Y)?U0.Clone(Y):u.Create($,J)},x0=function($,J,Y){const X=a0.IsString($.$id)?[...J,$]:J,Z=$;switch($[u$.Kind]){case"Any":return UQ(Z,X,Y);case"Array":return BQ(Z,X,Y);case"AsyncIterator":return AQ(Z,X,Y);case"BigInt":return NQ(Z,X,Y);case"Boolean":return DQ(Z,X,Y);case"Constructor":return wQ(Z,X,Y);case"Date":return KQ(Z,X,Y);case"Function":return PQ(Z,X,Y);case"Integer":return jQ(Z,X,Y);case"Intersect":return SQ(Z,X,Y);case"Iterator":return LQ(Z,X,Y);case"Literal":return OQ(Z,X,Y);case"Never":return CQ(Z,X,Y);case"Not":return IQ(Z,X,Y);case"Null":return bQ(Z,X,Y);case"Number":return _Q(Z,X,Y);case"Object":return RQ(Z,X,Y);case"Promise":return GQ(Z,X,Y);case"Record":return EQ(Z,X,Y);case"Ref":return xQ(Z,X,Y);case"String":return VQ(Z,X,Y);case"Symbol":return kQ(Z,X,Y);case"TemplateLiteral":return gQ(Z,X,Y);case"This":return fQ(Z,X,Y);case"Tuple":return TQ(Z,X,Y);case"Undefined":return dQ(Z,X,Y);case"Union":return yQ(Z,X,Y);case"Uint8Array":return vQ(Z,X,Y);case"Unknown":return iQ(Z,X,Y);case"Void":return pQ(Z,X,Y);default:if(!u$.TypeRegistry.Has(Z[u$.Kind]))throw new K4(Z);return mQ(Z,X,Y)}},v8=function(...$){return $.length===3?x0($[0],$[1],$[2]):x0($[0],[],$[1])};Object.defineProperty(i8,"__esModule",{value:!0});i8.Cast=i8.ValueCastDereferenceError=i8.ValueCastUnknownTypeError=i8.ValueCastRecursiveTypeError=i8.ValueCastNeverTypeError=i8.ValueCastArrayUniqueItemsTypeError=i8.ValueCastReferenceTypeError=void 0;var u$=G0(),u=A4(),o=n$(),U0=E$(),a0=L0();class d8 extends Error{constructor($){super(`ValueCast: Cannot locate referenced schema with \$id '${$.$ref}'`);this.schema=$}}i8.ValueCastReferenceTypeError=d8;class D4 extends Error{constructor($,J){super("ValueCast: Array cast produced invalid data due to uniqueItems constraint");this.schema=$,this.value=J}}i8.ValueCastArrayUniqueItemsTypeError=D4;class w4 extends Error{constructor($){super("ValueCast: Never types cannot be cast");this.schema=$}}i8.ValueCastNeverTypeError=w4;class y8 extends Error{constructor($){super("ValueCast.Recursive: Cannot cast recursive schemas");this.schema=$}}i8.ValueCastRecursiveTypeError=y8;class K4 extends Error{constructor($){super("ValueCast: Unknown type");this.schema=$}}i8.ValueCastUnknownTypeError=K4;class K1 extends Error{constructor($){super(`ValueCast: Unable to dereference type with \$id '${$.$ref}'`);this.schema=$}}i8.ValueCastDereferenceError=K1;var N4;(function($){function J(Z,Q,q){if(Z[u$.Kind]==="Object"&&typeof q==="object"&&!a0.IsNull(q)){const M=Z,B=Object.getOwnPropertyNames(q),D=Object.entries(M.properties),[N,P]=[1/D.length,D.length];return D.reduce((w,[A,L])=>{const O=L[u$.Kind]==="Literal"&&L.const===q[A]?P:0,R=o.Check(L,Q,q[A])?N:0,G=B.includes(A)?N:0;return w+(O+R+G)},0)}else return o.Check(Z,Q,q)?1:0}function Y(Z,Q,q){let[M,B]=[Z.anyOf[0],0];for(let D of Z.anyOf){const N=J(D,Q,q);if(N>B)M=D,B=N}return M}function X(Z,Q,q){if("default"in Z)return Z.default;else{const M=Y(Z,Q,q);return v8(M,Q,q)}}$.Create=X})(N4||(N4={}));i8.Cast=v8});var t8=l((h8)=>{var j1=function($){return h.IsString($)&&!isNaN($)&&!isNaN(parseFloat($))},sQ=function($){return h.IsBigInt($)||h.IsBoolean($)||h.IsNumber($)},c$=function($){return $===!0||h.IsNumber($)&&$===1||h.IsBigInt($)&&$===BigInt("1")||h.IsString($)&&($.toLowerCase()==="true"||$==="1")},h$=function($){return $===!1||h.IsNumber($)&&$===0||h.IsBigInt($)&&$===BigInt("0")||h.IsString($)&&($.toLowerCase()==="false"||$==="0")},rQ=function($){return h.IsString($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},aQ=function($){return h.IsString($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},eQ=function($){return h.IsString($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},$W=function($){return h.IsString($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},JW=function($){return h.IsString($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)},YW=function($,J){const Y=u8($);return Y===J?Y:$},XW=function($,J){const Y=c8($);return Y===J?Y:$},ZW=function($,J){const Y=n8($);return Y===J?Y:$},QW=function($,J){if(typeof $.const==="string")return YW(J,$.const);else if(typeof $.const==="number")return XW(J,$.const);else if(typeof $.const==="boolean")return ZW(J,$.const);else return o8.Clone(J)},n8=function($){return c$($)?!0:h$($)?!1:$},WW=function($){return j1($)?BigInt(parseInt($)):h.IsNumber($)?BigInt($|0):h$($)?0:c$($)?1:$},u8=function($){return sQ($)?$.toString():h.IsSymbol($)&&$.description!==void 0?$.description.toString():$},c8=function($){return j1($)?parseFloat($):c$($)?1:h$($)?0:$},zW=function($){return j1($)?parseInt($):h.IsNumber($)?$|0:c$($)?1:h$($)?0:$},HW=function($){return h.IsString($)&&$.toLowerCase()==="null"?null:$},qW=function($){return h.IsString($)&&$==="undefined"?void 0:$},MW=function($){return h.IsDate($)?$:h.IsNumber($)?new Date($):c$($)?new Date(1):h$($)?new Date(0):j1($)?new Date(parseInt($)):aQ($)?new Date(`1970-01-01T${$}.000Z`):rQ($)?new Date(`1970-01-01T${$}`):$W($)?new Date(`${$}.000Z`):eQ($)?new Date($):JW($)?new Date(`${$}T00:00:00.000Z`):$},FW=function($,J,Y){return Y},UW=function($,J,Y){if(h.IsArray(Y))return Y.map((X)=>o0($.items,J,X));return Y},BW=function($,J,Y){return Y},AW=function($,J,Y){return WW(Y)},NW=function($,J,Y){return n8(Y)},DW=function($,J,Y){return o8.Clone(Y)},wW=function($,J,Y){return MW(Y)},KW=function($,J,Y){return Y},PW=function($,J,Y){return zW(Y)},jW=function($,J,Y){return Y},SW=function($,J,Y){return Y},LW=function($,J,Y){return QW($,Y)},OW=function($,J,Y){return Y},CW=function($,J,Y){return HW(Y)},IW=function($,J,Y){return c8(Y)},bW=function($,J,Y){if(h.IsObject(Y))return Object.getOwnPropertyNames($.properties).reduce((X,Z)=>{return Y[Z]!==void 0?{...X,[Z]:o0($.properties[Z],J,Y[Z])}:{...X}},Y);return Y},_W=function($,J,Y){return Y},RW=function($,J,Y){const X=Object.getOwnPropertyNames($.patternProperties)[0],Z=$.patternProperties[X],Q={};for(let[q,M]of Object.entries(Y))Q[q]=o0(Z,J,M);return Q},GW=function($,J,Y){const X=J.findIndex((Q)=>Q.$id===$.$ref);if(X===-1)throw new P1($);const Z=J[X];return o0(Z,J,Y)},EW=function($,J,Y){return u8(Y)},xW=function($,J,Y){return Y},VW=function($,J,Y){return Y},kW=function($,J,Y){const X=J.findIndex((Q)=>Q.$id===$.$ref);if(X===-1)throw new P1($);const Z=J[X];return o0(Z,J,Y)},gW=function($,J,Y){if(h.IsArray(Y)&&!h.IsUndefined($.items))return Y.map((X,Z)=>{return Z<$.items.length?o0($.items[Z],J,X):X});return Y},fW=function($,J,Y){return qW(Y)},TW=function($,J,Y){for(let X of $.anyOf){const Z=o0(X,J,Y);if(tQ.Check(X,J,Z))return Z}return Y},dW=function($,J,Y){return Y},yW=function($,J,Y){return Y},vW=function($,J,Y){return Y},iW=function($,J,Y){return Y},o0=function($,J,Y){const X=h.IsString($.$id)?[...J,$]:J,Z=$;switch($[P4.Kind]){case"Any":return FW(Z,X,Y);case"Array":return UW(Z,X,Y);case"AsyncIterator":return BW(Z,X,Y);case"BigInt":return AW(Z,X,Y);case"Boolean":return NW(Z,X,Y);case"Constructor":return DW(Z,X,Y);case"Date":return wW(Z,X,Y);case"Function":return KW(Z,X,Y);case"Integer":return PW(Z,X,Y);case"Intersect":return jW(Z,X,Y);case"Iterator":return SW(Z,X,Y);case"Literal":return LW(Z,X,Y);case"Never":return OW(Z,X,Y);case"Null":return CW(Z,X,Y);case"Number":return IW(Z,X,Y);case"Object":return bW(Z,X,Y);case"Promise":return _W(Z,X,Y);case"Record":return RW(Z,X,Y);case"Ref":return GW(Z,X,Y);case"String":return EW(Z,X,Y);case"Symbol":return xW(Z,X,Y);case"TemplateLiteral":return VW(Z,X,Y);case"This":return kW(Z,X,Y);case"Tuple":return gW(Z,X,Y);case"Undefined":return fW(Z,X,Y);case"Union":return TW(Z,X,Y);case"Uint8Array":return dW(Z,X,Y);case"Unknown":return yW(Z,X,Y);case"Void":return vW(Z,X,Y);default:if(!P4.TypeRegistry.Has(Z[P4.Kind]))throw new j4(Z);return iW(Z,X,Y)}},pW=function(...$){return $.length===3?o0($[0],$[1],$[2]):o0($[0],[],$[1])};Object.defineProperty(h8,"__esModule",{value:!0});h8.Convert=h8.ValueConvertDereferenceError=h8.ValueConvertUnknownTypeError=void 0;var P4=G0(),o8=E$(),tQ=n$(),h=L0();class j4 extends Error{constructor($){super("ValueConvert: Unknown type");this.schema=$}}h8.ValueConvertUnknownTypeError=j4;class P1 extends Error{constructor($){super(`ValueConvert: Unable to dereference type with \$id '${$.$ref}'`);this.schema=$}}h8.ValueConvertDereferenceError=P1;h8.Convert=pW});var Q6=l((X6)=>{Object.defineProperty(X6,"__esModule",{value:!0});X6.Value=void 0;var s8=m$(),nW=_8(),uW=p$(),cW=E8(),r8=m8(),hW=E$(),a8=t8(),e8=A4(),$6=n$(),J6=Y4(),Y6;(function($){function J(...w){return r8.Cast.apply(r8,w)}$.Cast=J;function Y(...w){return e8.Create.apply(e8,w)}$.Create=Y;function X(...w){return $6.Check.apply($6,w)}$.Check=X;function Z(...w){return a8.Convert.apply(a8,w)}$.Convert=Z;function Q(w){return hW.Clone(w)}$.Clone=Q;function q(...w){return s8.Errors.apply(s8,w)}$.Errors=q;function M(w,A){return cW.Equal(w,A)}$.Equal=M;function B(w,A){return J6.Diff(w,A)}$.Diff=B;function D(w){return uW.Hash(w)}$.Hash=D;function N(w,A){return J6.Patch(w,A)}$.Patch=N;function P(w,A){nW.Mutate(w,A)}$.Mutate=P})(Y6||(X6.Value=Y6={}))});var S4=l((V0)=>{Object.defineProperty(V0,"__esModule",{value:!0});V0.Value=V0.ValuePointer=V0.Delete=V0.Update=V0.Insert=V0.Edit=V0.ValueErrorIterator=V0.ValueErrorType=void 0;var W6=m$();Object.defineProperty(V0,"ValueErrorType",{enumerable:!0,get:function(){return W6.ValueErrorType}});Object.defineProperty(V0,"ValueErrorIterator",{enumerable:!0,get:function(){return W6.ValueErrorIterator}});var S1=Y4();Object.defineProperty(V0,"Edit",{enumerable:!0,get:function(){return S1.Edit}});Object.defineProperty(V0,"Insert",{enumerable:!0,get:function(){return S1.Insert}});Object.defineProperty(V0,"Update",{enumerable:!0,get:function(){return S1.Update}});Object.defineProperty(V0,"Delete",{enumerable:!0,get:function(){return S1.Delete}});var lW=M1();Object.defineProperty(V0,"ValuePointer",{enumerable:!0,get:function(){return lW.ValuePointer}});var tW=Q6();Object.defineProperty(V0,"Value",{enumerable:!0,get:function(){return tW.Value}})});var M6=l((H6)=>{Object.defineProperty(H6,"__esModule",{value:!0});H6.TypeCompiler=H6.TypeCompilerTypeGuardError=H6.TypeCompilerDereferenceError=H6.TypeCompilerUnknownTypeError=H6.TypeCheck=void 0;var l$=i$(),a=G0(),rW=m$(),aW=p$(),d=L0();class O4{constructor($,J,Y,X){this.schema=$,this.references=J,this.checkFunc=Y,this.code=X}Code(){return this.code}Errors($){return rW.Errors(this.schema,this.references,$)}Check($){return this.checkFunc($)}}H6.TypeCheck=O4;var n0;(function($){function J(Q){return Q===36}$.DollarSign=J;function Y(Q){return Q===95}$.IsUnderscore=Y;function X(Q){return Q>=65&&Q<=90||Q>=97&&Q<=122}$.IsAlpha=X;function Z(Q){return Q>=48&&Q<=57}$.IsNumeric=Z})(n0||(n0={}));var L1;(function($){function J(Q){if(Q.length===0)return!1;return n0.IsNumeric(Q.charCodeAt(0))}function Y(Q){if(J(Q))return!1;for(let q=0;q<Q.length;q++){const M=Q.charCodeAt(q);if(!(n0.IsAlpha(M)||n0.IsNumeric(M)||n0.DollarSign(M)||n0.IsUnderscore(M)))return!1}return!0}function X(Q){return Q.replace(/'/g,"\\'")}function Z(Q,q){return Y(q)?`${Q}.${q}`:`${Q}['${X(q)}']`}$.Encode=Z})(L1||(L1={}));var L4;(function($){function J(Y){const X=[];for(let Z=0;Z<Y.length;Z++){const Q=Y.charCodeAt(Z);if(n0.IsNumeric(Q)||n0.IsAlpha(Q))X.push(Y.charAt(Z));else X.push(`_${Q}_`)}return X.join("").replace(/__/g,"_")}$.Encode=J})(L4||(L4={}));class C4 extends Error{constructor($){super("TypeCompiler: Unknown type");this.schema=$}}H6.TypeCompilerUnknownTypeError=C4;class I4 extends Error{constructor($){super(`TypeCompiler: Unable to dereference type with \$id '${$.$ref}'`);this.schema=$}}H6.TypeCompilerDereferenceError=I4;class O1 extends Error{constructor($){super("TypeCompiler: Preflight validation check failed to guard for the given schema");this.schema=$}}H6.TypeCompilerTypeGuardError=O1;var z6;(function($){function J(U){return U[a.Kind]==="Any"||U[a.Kind]==="Unknown"}function Y(U,j,W){return l$.TypeSystem.ExactOptionalPropertyTypes?`('${j}' in ${U} ? ${W} : true)`:`(${L1.Encode(U,j)} !== undefined ? ${W} : true)`}function X(U){return!l$.TypeSystem.AllowArrayObjects?`(typeof ${U} === 'object' && ${U} !== null && !Array.isArray(${U}))`:`(typeof ${U} === 'object' && ${U} !== null)`}function Z(U){return!l$.TypeSystem.AllowArrayObjects?`(typeof ${U} === 'object' && ${U} !== null && !Array.isArray(${U}) && !(${U} instanceof Date) && !(${U} instanceof Uint8Array))`:`(typeof ${U} === 'object' && ${U} !== null && !(${U} instanceof Date) && !(${U} instanceof Uint8Array))`}function Q(U){return!l$.TypeSystem.AllowNaN?`(typeof ${U} === 'number' && Number.isFinite(${U}))`:`typeof ${U} === 'number'`}function q(U){return l$.TypeSystem.AllowVoidNull?`(${U} === undefined || ${U} === null)`:`${U} === undefined`}function*M(U,j,W){yield"true"}function*B(U,j,W){yield`Array.isArray(${W})`;const[b,C]=[_0("value","any"),_0("acc","number")];if(d.IsNumber(U.minItems))yield`${W}.length >= ${U.minItems}`;if(d.IsNumber(U.maxItems))yield`${W}.length <= ${U.maxItems}`;const E=Y0(U.items,j,"value");if(yield`${W}.every((${b}) => ${E})`,a.TypeGuard.TSchema(U.contains)||d.IsNumber(U.minContains)||d.IsNumber(U.maxContains)){const c=a.TypeGuard.TSchema(U.contains)?U.contains:a.Type.Never(),z0=Y0(c,j,"value"),N0=d.IsNumber(U.minContains)?[`(count >= ${U.minContains})`]:[],D0=d.IsNumber(U.maxContains)?[`(count <= ${U.maxContains})`]:[],w0=`const count = ${W}.reduce((${C}, ${b}) => ${z0} ? acc + 1 : acc, 0)`,K$=["(count > 0)",...N0,...D0].join(" && ");yield`((${b}) => { ${w0}; return ${K$}})(${W})`}if(U.uniqueItems===!0)yield`((${b}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${W})`}function*D(U,j,W){yield`(typeof value === 'object' && Symbol.asyncIterator in ${W})`}function*N(U,j,W){if(yield`(typeof ${W} === 'bigint')`,d.IsBigInt(U.multipleOf))yield`(${W} % BigInt(${U.multipleOf})) === 0`;if(d.IsBigInt(U.exclusiveMinimum))yield`${W} > BigInt(${U.exclusiveMinimum})`;if(d.IsBigInt(U.exclusiveMaximum))yield`${W} < BigInt(${U.exclusiveMaximum})`;if(d.IsBigInt(U.minimum))yield`${W} >= BigInt(${U.minimum})`;if(d.IsBigInt(U.maximum))yield`${W} <= BigInt(${U.maximum})`}function*P(U,j,W){yield`(typeof ${W} === 'boolean')`}function*w(U,j,W){yield*A0(U.returns,j,`${W}.prototype`)}function*A(U,j,W){if(yield`(${W} instanceof Date) && Number.isFinite(${W}.getTime())`,d.IsNumber(U.exclusiveMinimumTimestamp))yield`${W}.getTime() > ${U.exclusiveMinimumTimestamp}`;if(d.IsNumber(U.exclusiveMaximumTimestamp))yield`${W}.getTime() < ${U.exclusiveMaximumTimestamp}`;if(d.IsNumber(U.minimumTimestamp))yield`${W}.getTime() >= ${U.minimumTimestamp}`;if(d.IsNumber(U.maximumTimestamp))yield`${W}.getTime() <= ${U.maximumTimestamp}`}function*L(U,j,W){yield`(typeof ${W} === 'function')`}function*O(U,j,W){if(yield`(typeof ${W} === 'number' && Number.isInteger(${W}))`,d.IsNumber(U.multipleOf))yield`(${W} % ${U.multipleOf}) === 0`;if(d.IsNumber(U.exclusiveMinimum))yield`${W} > ${U.exclusiveMinimum}`;if(d.IsNumber(U.exclusiveMaximum))yield`${W} < ${U.exclusiveMaximum}`;if(d.IsNumber(U.minimum))yield`${W} >= ${U.minimum}`;if(d.IsNumber(U.maximum))yield`${W} <= ${U.maximum}`}function*R(U,j,W){const b=U.allOf.map((C)=>Y0(C,j,W)).join(" && ");if(U.unevaluatedProperties===!1){const C=d0(`${new RegExp(a.KeyResolver.ResolvePattern(U))};`),E=`Object.getOwnPropertyNames(${W}).every(key => ${C}.test(key))`;yield`(${b} && ${E})`}else if(a.TypeGuard.TSchema(U.unevaluatedProperties)){const C=d0(`${new RegExp(a.KeyResolver.ResolvePattern(U))};`),E=`Object.getOwnPropertyNames(${W}).every(key => ${C}.test(key) || ${Y0(U.unevaluatedProperties,j,`${W}[key]`)})`;yield`(${b} && ${E})`}else yield`(${b})`}function*G(U,j,W){yield`(typeof value === 'object' && Symbol.iterator in ${W})`}function*k(U,j,W){if(typeof U.const==="number"||typeof U.const==="boolean")yield`(${W} === ${U.const})`;else yield`(${W} === '${U.const}')`}function*y(U,j,W){yield"false"}function*S(U,j,W){yield`(!${Y0(U.not,j,W)})`}function*V(U,j,W){yield`(${W} === null)`}function*T(U,j,W){if(yield Q(W),d.IsNumber(U.multipleOf))yield`(${W} % ${U.multipleOf}) === 0`;if(d.IsNumber(U.exclusiveMinimum))yield`${W} > ${U.exclusiveMinimum}`;if(d.IsNumber(U.exclusiveMaximum))yield`${W} < ${U.exclusiveMaximum}`;if(d.IsNumber(U.minimum))yield`${W} >= ${U.minimum}`;if(d.IsNumber(U.maximum))yield`${W} <= ${U.maximum}`}function*F0(U,j,W){if(yield X(W),d.IsNumber(U.minProperties))yield`Object.getOwnPropertyNames(${W}).length >= ${U.minProperties}`;if(d.IsNumber(U.maxProperties))yield`Object.getOwnPropertyNames(${W}).length <= ${U.maxProperties}`;const b=Object.getOwnPropertyNames(U.properties);for(let C of b){const E=L1.Encode(W,C),c=U.properties[C];if(U.required&&U.required.includes(C)){if(yield*A0(c,j,E),a.ExtendsUndefined.Check(c)||J(c))yield`('${C}' in ${W})`}else{const z0=Y0(c,j,E);yield Y(W,C,z0)}}if(U.additionalProperties===!1)if(U.required&&U.required.length===b.length)yield`Object.getOwnPropertyNames(${W}).length === ${b.length}`;else{const C=`[${b.map((E)=>`'${E}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${W}).every(key => ${C}.includes(key))`}if(typeof U.additionalProperties==="object"){const C=Y0(U.additionalProperties,j,`${W}[key]`),E=`[${b.map((c)=>`'${c}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${W}).every(key => ${E}.includes(key) || ${C}))`}}function*J0(U,j,W){yield`(typeof value === 'object' && typeof ${W}.then === 'function')`}function*X$(U,j,W){if(yield Z(W),d.IsNumber(U.minProperties))yield`Object.getOwnPropertyNames(${W}).length >= ${U.minProperties}`;if(d.IsNumber(U.maxProperties))yield`Object.getOwnPropertyNames(${W}).length <= ${U.maxProperties}`;const[b,C]=Object.entries(U.patternProperties)[0],E=d0(`new RegExp(/${b}/)`),c=Y0(C,j,"value"),z0=a.TypeGuard.TSchema(U.additionalProperties)?Y0(U.additionalProperties,j,W):U.additionalProperties===!1?"false":"true",N0=`(${E}.test(key) ? ${c} : ${z0})`;yield`(Object.entries(${W}).every(([key, value]) => ${N0}))`}function*b0(U,j,W){const b=j.findIndex((E)=>E.$id===U.$ref);if(b===-1)throw new I4(U);const C=j[b];if(r.functions.has(U.$ref))return yield`${t(U.$ref)}(${W})`;yield*A0(C,j,W)}function*T0(U,j,W){if(yield`(typeof ${W} === 'string')`,d.IsNumber(U.minLength))yield`${W}.length >= ${U.minLength}`;if(d.IsNumber(U.maxLength))yield`${W}.length <= ${U.maxLength}`;if(U.pattern!==void 0)yield`${d0(`${new RegExp(U.pattern)};`)}.test(${W})`;if(U.format!==void 0)yield`format('${U.format}', ${W})`}function*e(U,j,W){yield`(typeof ${W} === 'symbol')`}function*Z$(U,j,W){yield`(typeof ${W} === 'string')`,yield`${d0(`${new RegExp(U.pattern)};`)}.test(${W})`}function*Q$(U,j,W){yield`${t(U.$ref)}(${W})`}function*h0(U,j,W){if(yield`Array.isArray(${W})`,U.items===void 0)return yield`${W}.length === 0`;yield`(${W}.length === ${U.maxItems})`;for(let b=0;b<U.items.length;b++)yield`${Y0(U.items[b],j,`${W}[${b}]`)}`}function*W$(U,j,W){yield`${W} === undefined`}function*U$(U,j,W){yield`(${U.anyOf.map((C)=>Y0(C,j,W)).join(" || ")})`}function*B$(U,j,W){if(yield`${W} instanceof Uint8Array`,d.IsNumber(U.maxByteLength))yield`(${W}.length <= ${U.maxByteLength})`;if(d.IsNumber(U.minByteLength))yield`(${W}.length >= ${U.minByteLength})`}function*A$(U,j,W){yield"true"}function*N$(U,j,W){yield q(W)}function*D$(U,j,W){const b=r.instances.size;r.instances.set(b,U),yield`kind('${U[a.Kind]}', ${b}, ${W})`}function*A0(U,j,W,b=!0){const C=d.IsString(U.$id)?[...j,U]:j,E=U;if(b&&d.IsString(U.$id)){const c=t(U.$id);if(r.functions.has(c))return yield`${c}(${W})`;else{const z0=l0(c,U,j,"value",!1);return r.functions.set(c,z0),yield`${c}(${W})`}}switch(E[a.Kind]){case"Any":return yield*M(E,C,W);case"Array":return yield*B(E,C,W);case"AsyncIterator":return yield*D(E,C,W);case"BigInt":return yield*N(E,C,W);case"Boolean":return yield*P(E,C,W);case"Constructor":return yield*w(E,C,W);case"Date":return yield*A(E,C,W);case"Function":return yield*L(E,C,W);case"Integer":return yield*O(E,C,W);case"Intersect":return yield*R(E,C,W);case"Iterator":return yield*G(E,C,W);case"Literal":return yield*k(E,C,W);case"Never":return yield*y(E,C,W);case"Not":return yield*S(E,C,W);case"Null":return yield*V(E,C,W);case"Number":return yield*T(E,C,W);case"Object":return yield*F0(E,C,W);case"Promise":return yield*J0(E,C,W);case"Record":return yield*X$(E,C,W);case"Ref":return yield*b0(E,C,W);case"String":return yield*T0(E,C,W);case"Symbol":return yield*e(E,C,W);case"TemplateLiteral":return yield*Z$(E,C,W);case"This":return yield*Q$(E,C,W);case"Tuple":return yield*h0(E,C,W);case"Undefined":return yield*W$(E,C,W);case"Union":return yield*U$(E,C,W);case"Uint8Array":return yield*B$(E,C,W);case"Unknown":return yield*A$(E,C,W);case"Void":return yield*N$(E,C,W);default:if(!a.TypeRegistry.Has(E[a.Kind]))throw new C4(U);return yield*D$(E,C,W)}}const r={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function Y0(U,j,W,b=!0){return`(${[...A0(U,j,W,b)].join(" && ")})`}function t(U){return`check_${L4.Encode(U)}`}function d0(U){const j=`local_${r.variables.size}`;return r.variables.set(j,`const ${j} = ${U}`),j}function l0(U,j,W,b,C=!0){const[E,c]=["\n",(w0)=>"".padStart(w0," ")],z0=_0("value","any"),N0=y0("boolean"),D0=[...A0(j,W,b,C)].map((w0)=>`${c(4)}${w0}`).join(` &&${E}`);return`function ${U}(${z0})${N0} {${E}${c(2)}return (${E}${D0}${E}${c(2)})\n}`}function _0(U,j){const W=r.language==="typescript"?`: ${j}`:"";return`${U}${W}`}function y0(U){return r.language==="typescript"?`: ${U}`:""}function X0(U,j,W){const b=l0("check",U,j,"value"),C=_0("value","any"),E=y0("boolean"),c=[...r.functions.values()],z0=[...r.variables.values()],N0=d.IsString(U.$id)?`return function check(${C})${E} {\n  return ${t(U.$id)}(value)\n}`:`return ${b}`;return[...z0,...c,N0].join("\n")}function z$(...U){const j={language:"javascript"},[W,b,C]=U.length===2&&d.IsArray(U[1])?[U[0],U[1],j]:U.length===2&&!d.IsArray(U[1])?[U[0],[],U[1]]:U.length===3?[U[0],U[1],U[2]]:U.length===1?[U[0],[],j]:[null,[],j];if(r.language=C.language,r.variables.clear(),r.functions.clear(),r.instances.clear(),!a.TypeGuard.TSchema(W))throw new O1(W);for(let E of b)if(!a.TypeGuard.TSchema(E))throw new O1(E);return X0(W,b,C)}$.Code=z$;function w$(U,j=[]){const W=z$(U,j,{language:"javascript"}),b=globalThis.Function("kind","format","hash",W),C=new Map(r.instances);function E(D0,w0,K$){if(!a.TypeRegistry.Has(D0)||!C.has(w0))return!1;const x1=C.get(w0);return a.TypeRegistry.Get(D0)(x1,K$)}function c(D0,w0){if(!a.FormatRegistry.Has(D0))return!1;return a.FormatRegistry.Get(D0)(w0)}function z0(D0){return aW.Hash(D0)}const N0=b(E,c,z0);return new O4(U,j,N0,W)}$.Compile=w$})(z6||(H6.TypeCompiler=z6={}))});var F6=l((u0)=>{var Xz=u0&&u0.__createBinding||(Object.create?function($,J,Y,X){if(X===void 0)X=Y;var Z=Object.getOwnPropertyDescriptor(J,Y);if(!Z||("get"in Z?!J.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return J[Y]}};Object.defineProperty($,X,Z)}:function($,J,Y,X){if(X===void 0)X=Y;$[X]=J[Y]}),Zz=u0&&u0.__exportStar||function($,J){for(var Y in $)if(Y!=="default"&&!Object.prototype.hasOwnProperty.call(J,Y))Xz(J,$,Y)};Object.defineProperty(u0,"__esModule",{value:!0});u0.ValueErrorType=void 0;var Qz=m$();Object.defineProperty(u0,"ValueErrorType",{enumerable:!0,get:function(){return Qz.ValueErrorType}});Zz(M6(),u0)});var D6=l((az,N6)=>{var zz=function($){var J=$.indexOf("%");if(J===-1)return $;var Y=$.length,X="",Z=0,Q=0,q=J,M=B6;while(J>-1&&J<Y){var B=A6($[J+1],4),D=A6($[J+2],0),N=B|D,P=E4[N];if(M=E4[256+M+P],Q=Q<<6|N&E4[364+P],M===B6)X+=$.slice(Z,q),X+=Q<=65535?String.fromCharCode(Q):String.fromCharCode(55232+(Q>>10),56320+(Q&1023)),Q=0,Z=J+3,J=q=$.indexOf("%",Z);else if(M===Wz)return null;else{if(J+=3,J<Y&&$.charCodeAt(J)===37)continue;return null}}return X+$.slice(Z)},A6=function($,J){var Y=Hz[$];return Y===void 0?255:Y<<J},B6=12,Wz=0,E4=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7],Hz={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};N6.exports=zz});var S6=l((ez,j6)=>{var qz=function($){const J=new P6;if(typeof $!=="string")return J;let Y=$.length,X="",Z="",Q=-1,q=-1,M=!1,B=!1,D=!1,N=!1,P=!1,w=0;for(let A=0;A<Y+1;A++)if(w=A!==Y?$.charCodeAt(A):38,w===38){if(P=q>Q,!P)q=A;if(X=$.slice(Q+1,q),P||X.length>0){if(D)X=X.replace(K6," ");if(M)X=w6(X)||X;if(P){if(Z=$.slice(q+1,A),N)Z=Z.replace(K6," ");if(B)Z=w6(Z)||Z}const L=J[X];if(L===void 0)J[X]=Z;else if(L.pop)L.push(Z);else J[X]=[L,Z]}Z="",Q=A,q=A,M=!1,B=!1,D=!1,N=!1}else if(w===61)if(q<=Q)q=A;else B=!0;else if(w===43)if(q>Q)N=!0;else D=!0;else if(w===37)if(q>Q)B=!0;else M=!0;return J},w6=D6(),K6=/\+/g,P6=function(){};P6.prototype=Object.create(null);j6.exports=qz});var O6=l(($9,L6)=>{var Fz=function($){const J=$.length;if(J===0)return"";let Y="",X=0,Z=0;$:for(;Z<J;Z++){let Q=$.charCodeAt(Z);while(Q<128){if(Mz[Q]!==1){if(X<Z)Y+=$.slice(X,Z);X=Z+1,Y+=g0[Q]}if(++Z===J)break $;Q=$.charCodeAt(Z)}if(X<Z)Y+=$.slice(X,Z);if(Q<2048){X=Z+1,Y+=g0[192|Q>>6]+g0[128|Q&63];continue}if(Q<55296||Q>=57344){X=Z+1,Y+=g0[224|Q>>12]+g0[128|Q>>6&63]+g0[128|Q&63];continue}if(++Z,Z>=J)throw new Error("URI malformed");const q=$.charCodeAt(Z)&1023;X=Z+1,Q=65536+((Q&1023)<<10|q),Y+=g0[240|Q>>18]+g0[128|Q>>12&63]+g0[128|Q>>6&63]+g0[128|Q&63]}if(X===0)return $;if(X<J)return Y+$.slice(X);return Y},g0=Array.from({length:256},($,J)=>"%"+((J<16?"0":"")+J.toString(16)).toUpperCase()),Mz=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);L6.exports={encodeString:Fz}});var b6=l((J9,I6)=>{var C6=function($){const J=typeof $;if(J==="string")return x4($);else if(J==="bigint")return $.toString();else if(J==="boolean")return $?"true":"false";else if(J==="number"&&Number.isFinite($))return $<1000000000000000000000?""+$:x4(""+$);return""},Uz=function($){let J="";if($===null||typeof $!=="object")return J;const Y="&",X=Object.keys($),Z=X.length;let Q=0;for(let q=0;q<Z;q++){const M=X[q],B=$[M],D=x4(M)+"=";if(q)J+=Y;if(Array.isArray(B)){Q=B.length;for(let N=0;N<Q;N++){if(N)J+=Y;J+=D,J+=C6(B[N])}}else J+=D,J+=C6(B)}return J},{encodeString:x4}=O6();I6.exports=Uz});var V4=l((Y9,s$)=>{var _6=S6(),R6=b6(),G6={parse:_6,stringify:R6};s$.exports=G6;s$.exports.default=G6;s$.exports.parse=_6;s$.exports.stringify=R6});var P$=($,J)=>({part:$,store:null,inert:J!==void 0?new Map(J.map((Y)=>[Y.part.charCodeAt(0),Y])):null,params:null,wildcardStore:null}),v4=($,J)=>({...$,part:J}),i4=($)=>({paramName:$,store:null,inert:null});class s0{root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g};add($,J,Y){let X;if(typeof J!="string")throw TypeError("Route path must be a string");J===""?J="/":J[0]!=="/"&&(J=`/${J}`),this.history.push([$,J,Y]);let Z=J[J.length-1]==="*";Z&&(J=J.slice(0,-1));let Q=J.split(s0.regex.static),q=J.match(s0.regex.params)||[];Q[Q.length-1]===""&&Q.pop(),X=this.root[$]?this.root[$]:this.root[$]=P$("/");let M=0;for(let B=0;B<Q.length;++B){let D=Q[B];if(B>0){let N=q[M++].slice(1);if(X.params===null)X.params=i4(N);else if(X.params.paramName!==N)throw Error(`Cannot create route "${J}" with parameter "${N}" because a route already exists with a different parameter name ("${X.params.paramName}") in the same location`);let P=X.params;if(P.inert===null){X=P.inert=P$(D);continue}X=P.inert}for(let N=0;;){if(N===D.length){if(N<X.part.length){let P=v4(X,X.part.slice(N));Object.assign(X,P$(D,[P]))}break}if(N===X.part.length){if(X.inert===null)X.inert=new Map;else if(X.inert.has(D.charCodeAt(N))){X=X.inert.get(D.charCodeAt(N)),D=D.slice(N),N=0;continue}let P=P$(D.slice(N));X.inert.set(D.charCodeAt(N),P),X=P;break}if(D[N]!==X.part[N]){let P=v4(X,X.part.slice(N)),w=P$(D.slice(N));Object.assign(X,P$(X.part.slice(0,N),[P,w])),X=w;break}++N}}if(M<q.length){let B=q[M],D=B.slice(1);if(X.params===null)X.params=i4(D);else if(X.params.paramName!==D)throw Error(`Cannot create route "${J}" with parameter "${D}" because a route already exists with a different parameter name ("${X.params.paramName}") in the same location`);return X.params.store===null&&(X.params.store=Y),X.params.store}return Z?(X.wildcardStore===null&&(X.wildcardStore=Y),X.wildcardStore):(X.store===null&&(X.store=Y),X.store)}find($,J){let Y=this.root[$];return Y?V1(J,J.length,Y,0):null}}var V1=($,J,Y,X)=>{let Z=Y?.part,Q=X+Z.length;if(Z.length>1){if(Q>J)return null;if(Z.length<15){for(let q=1,M=X+1;q<Z.length;++q,++M)if(Z.charCodeAt(q)!==$.charCodeAt(M))return null}else if($.substring(X,Q)!==Z)return null}if(Q===J)return Y.store!==null?{store:Y.store,params:{}}:Y.wildcardStore!==null?{store:Y.wildcardStore,params:{"*":""}}:null;if(Y.inert!==null){let q=Y.inert.get($.charCodeAt(Q));if(q!==void 0){let M=V1($,J,q,Q);if(M!==null)return M}}if(Y.params!==null){let q=Y.params,M=$.indexOf("/",Q);if(M!==Q){if(M===-1||M>=J){if(q.store!==null){let B={};return B[q.paramName]=$.substring(Q,J),{store:q.store,params:B}}}else if(q.inert!==null){let B=V1($,J,q.inert,M);if(B!==null)return B.params[q.paramName]=$.substring(Q,M),B}}}return Y.wildcardStore!==null?{store:Y.wildcardStore,params:{"*":$.substring(Q,J)}}:null};var C1=t0(G0(),1),t$=t0(S4(),1),_4=t0(F6(),1),M0=($,J)=>{const Y=[...Array.isArray($)?$:[$]],X=[];for(let Z of Y)if(Z.$elysiaChecksum)X.push(Z.$elysiaChecksum);for(let Z of Array.isArray(J)?J:[J])if(!X.includes(Z?.$elysiaChecksum))Y.push(Z);return Y},e0=($,J)=>{return{body:J?.body??$?.body,headers:J?.headers??$?.headers,params:J?.params??$?.params,query:J?.query??$?.query,response:J?.response??$?.response,type:$?.type||J?.type,detail:k0(J?.detail??{},$?.detail??{}),parse:M0($.parse??[],J?.parse??[]),transform:M0($.transform??[],J?.transform??[]),beforeHandle:M0($.beforeHandle??[],J?.beforeHandle??[]),afterHandle:M0($.afterHandle??[],J?.afterHandle??[]),onResponse:M0($.onResponse??[],J?.onResponse??[]),error:M0($.error??[],J?.error??[])}},b4=($)=>$&&typeof $==="object"&&!Array.isArray($),k0=($,J)=>{const Y=Object.assign({},$);if(b4($)&&b4(J))Object.keys(J).forEach((X)=>{if(b4(J[X]))if(!(X in $))Object.assign(Y,{[X]:J[X]});else Y[X]=k0($[X],J[X]);else Object.assign(Y,{[X]:J[X]})});return Y},I0=($,{models:J={},additionalProperties:Y=!1,dynamic:X=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in J))return;const Z=typeof $==="string"?J[$]:$;if(Z.type==="object"&&("additionalProperties"in Z)===!1)Z.additionalProperties=Y;if(X)return{schema:Z,references:"",checkFunc:()=>{},code:"",Check:(Q)=>t$.Value.Check(Z,Q),Errors:(Q)=>t$.Value.Errors(Z,Q),Code:()=>""};return _4.TypeCompiler.Compile(Z)},R4=($,{models:J={},additionalProperties:Y=!1,dynamic:X=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in J))return;const Z=typeof $==="string"?J[$]:$,Q=(M)=>{if(X)return{schema:M,references:"",checkFunc:()=>{},code:"",Check:(B)=>t$.Value.Check(M,B),Errors:(B)=>t$.Value.Errors(M,B),Code:()=>""};return _4.TypeCompiler.Compile(M)};if(C1.Kind in Z)return{200:Q(Z)};const q={};return Object.keys(Z).forEach((M)=>{const B=Z[M];if(typeof B==="string"){if(B in J){const D=J[B];D.type==="object"&&("additionalProperties"in D),q[+M]=(C1.Kind in D)?Q(D):D}return}if(B.type==="object"&&("additionalProperties"in B)===!1)B.additionalProperties=Y;q[+M]=(C1.Kind in B)?Q(B):B}),q},G4=($)=>{let J=9;for(let Y=0;Y<$.length;)J=Math.imul(J^$.charCodeAt(Y++),387420489);return J=J^J>>>9},f$=($,J,Y)=>{const X=(Z)=>{if(Y)Z.$elysiaChecksum=Y;return Z};return{start:M0($.start,("start"in J?J.start:[]).map(X)),request:M0($.request,("request"in J?J.request:[]).map(X)),parse:M0($.parse,J?.parse??[]).map(X),transform:M0($.transform,(J?.transform??[]).map(X)),beforeHandle:M0($.beforeHandle,(J?.beforeHandle??[]).map(X)),afterHandle:M0($.afterHandle,(J?.afterHandle??[]).map(X)),onResponse:M0($.onResponse,(J?.onResponse??[]).map(X)),error:M0($.error,(J?.error??[]).map(X)),stop:M0($.stop,("stop"in J?J.stop:[]).map(X))}},k$=($)=>{if(!$)return $;if(typeof $==="function")return $.$elysiaHookType="inline",$;return $.map((J)=>{return J.$elysiaHookType="inline",J})},S0=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:k$($?.parse),transform:k$($?.transform),beforeHandle:k$($?.beforeHandle),afterHandle:k$($?.afterHandle),onResponse:k$($?.onResponse),error:k$($?.error)}},g$=($)=>{if(!$)return $;if(typeof $==="function")return $.$elysiaHookType==="inline"?$:void 0;return $.filter((J)=>J.$elysiaHookType==="inline")},U6=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:g$($?.parse),transform:g$($?.transform),beforeHandle:g$($?.beforeHandle),afterHandle:g$($?.afterHandle),onResponse:g$($?.onResponse),error:g$($?.error)}};var g6=t0(V4(),1);var E6=($)=>{for(let J in $)return!0;return!1},x6=($,J)=>{$.delete("Set-Cookie");for(let Y=0;Y<J.length;Y++){const X=J[Y].indexOf("=");$.append("Set-Cookie",`${J[Y].slice(0,X)}=${J[Y].slice(X+1)}`)}return $},f0=($,J)=>{if(E6(J.headers)||J.status!==200||J.redirect){if(J.redirect)J.headers.Location=J.redirect,J.status=302;if(J.headers["Set-Cookie"]&&Array.isArray(J.headers["Set-Cookie"]))J.headers=x6(new Headers(J.headers),J.headers["Set-Cookie"]);switch($?.constructor?.name){case"String":case"Blob":return new Response($,J);case"Object":case"Array":return Response.json($,J);case void 0:if(!$)return;return Response.json($,J);case"Response":for(let X in J.headers)$.headers.append(X,J.headers[X]);return $;case"Promise":return $.then((X)=>{const Z=f0(X,J);if(Z!==void 0)return Z;return});case"Error":return r$($,J.headers);case"Function":return $();case"Number":case"Boolean":return new Response($.toString(),J);default:if($ instanceof Response)return $;const Y=JSON.stringify($);if(Y.charCodeAt(0)===123){if(!J.headers["Content-Type"])J.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),J)}return new Response(Y,J)}}else switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Promise":return $.then((X)=>{const Z=f0(X,J);if(Z!==void 0)return Z;return});case"Error":return r$($,J.headers);case"Function":return $();case"Number":case"Boolean":return new Response($.toString());default:if($ instanceof Response)return $;const Y=JSON.stringify($);if(Y.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(Y)}},c0=($,J)=>{if(E6(J.headers)||J.status!==200||J.redirect){if(J.redirect)J.headers.Location=J.redirect,J.status=302;if(J.headers["Set-Cookie"]&&Array.isArray(J.headers["Set-Cookie"]))J.headers=x6(new Headers(J.headers),J.headers["Set-Cookie"]);switch($?.constructor?.name){case"String":case"Blob":return new Response($,{status:J.status,headers:J.headers});case"Object":case"Array":return Response.json($,J);case void 0:if(!$)return new Response("",J);return Response.json($,J);case"Response":for(let X in J.headers)$.headers.append(X,J.headers[X]);return $;case"Error":return r$($,J.headers);case"Promise":return $.then((X)=>c0(X,J));case"Function":return $();case"Number":case"Boolean":return new Response($.toString(),J);default:if($ instanceof Response)return $;const Y=JSON.stringify($);if(Y.charCodeAt(0)===123){if(!J.headers["Content-Type"])J.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),J)}return new Response(Y,J)}}else switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return r$($);case"Promise":return $.then((X)=>{const Z=c0(X,J);if(Z!==void 0)return Z;return new Response("")});case"Function":return $();case"Number":case"Boolean":return new Response($.toString());default:if($ instanceof Response)return $;const Y=JSON.stringify($);if(Y.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(Y)}},I1=($)=>{switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return r$($);case"Promise":return $.then((Y)=>{const X=I1(Y);if(X!==void 0)return X;return new Response("")});case"Function":return $();case"Number":case"Boolean":return new Response($.toString());default:if($ instanceof Response)return $;const J=JSON.stringify($);if(J.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(J)}},r$=($,J)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:500,headers:J});var k4=t0(S4(),1),V6=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,$$=Symbol("ErrorCode"),a$=(V6?.NODE_ENV??V6?.ENV)==="production";class b1 extends Error{code="NOT_FOUND";status=500;constructor(){super("INTERNAL_SERVER_ERROR")}}class F$ extends Error{code="NOT_FOUND";status=404;constructor(){super("NOT_FOUND")}}class k6 extends Error{code="PARSE";status=400;constructor(){super("PARSE")}}class B0 extends Error{$;J;Y;code="VALIDATION";status=400;constructor($,J,Y){const X=a$?void 0:J.Errors(Y).First(),Z=X?.schema.error?typeof X.schema.error==="function"?X.schema.error($,J,Y):X.schema.error:void 0,Q=a$?Z??`Invalid ${$??X?.schema.error??X?.message}`:Z??`Invalid ${$}, '${X?.path?.slice(1)||"type"}': ${X?.message}`+"\n\nExpected: "+JSON.stringify(k4.Value.Create(J.schema),null,2)+"\n\nFound: "+JSON.stringify(Y,null,2);super(Q);this.type=$;this.validator=J;this.value=Y;Object.setPrototypeOf(this,B0.prototype)}get all(){return[...this.validator.Errors(this.value)]}get model(){return k4.Value.Create(this.validator.schema)}toResponse($){return new Response(this.message,{status:400,headers:$})}}var Bz=new Headers,Az=new RegExp(" (\\w+) = context","g"),$1=($)=>{const J=$.indexOf(")");if($.charCodeAt(J+2)===61&&$.charCodeAt(J+5)!==123)return!0;return $.includes("return")},Nz=($)=>({composeValidation:(J,Y=`c.${J}`)=>$?`c.set.status = 400; throw new ValidationError(
'${J}',
${J},
${Y}
)`:`c.set.status = 400; return new ValidationError(
	'${J}',
	${J},
	${Y}
).toResponse(c.set.headers)`,composeResponseValidation:(J="r")=>$?`throw new ValidationError(
'response',
response[c.set.status],
${J}
)`:`return new ValidationError(
'response',
response[c.set.status],
${J}
).toResponse(c.set.headers)`}),e$=($,J)=>{J=J.trimStart(),J=J.replaceAll(/^async /g,"");const Y=J.charCodeAt(0)===40||J.startsWith("function")?J.slice(J.indexOf("(")+1,J.indexOf(")")):J.slice(0,J.indexOf("=")-1);if(Y==="")return!1;if(Y.charCodeAt(0)===123){if(Y.includes($))return!0;return!1}if(J.match(new RegExp(`${Y}(.${$}|\\["${$}"\\])`)))return!0;const X=[Y];for(let Q of J.matchAll(Az))X.push(Q[1]);const Z=new RegExp(`{.*?} = (${X.join("|")})`,"g");for(let[Q]of J.matchAll(Z))if(Q.includes(`{ ${$}`)||Q.includes(`, ${$}`))return!0;return!1},T$=($,J,Y=[],X="")=>{if(J.type==="object"){const Z=J.properties;for(let Q in Z){const q=Z[Q],M=!X?Q:X+"."+Q;if(q.type==="object"){T$($,q,Y,M);continue}else if(q.anyOf){for(let B of q.anyOf)T$($,B,Y,M);continue}if(q.elysiaMeta===$)Y.push(M)}if(Y.length===0)return null;return Y}else if(J?.elysiaMeta===$){if(X)Y.push(X);return"root"}return null},Dz=($)=>{if(!$)return;const J=$?.schema;if(J&&("anyOf"in J)){let Y=!1;const X=J.anyOf[0].type;for(let Z of J.anyOf)if(Z.type!==X){Y=!0;break}if(!Y)return X}},wz=/(?:return|=>) \S*\(/g,W0=($)=>{if($.constructor.name==="AsyncFunction")return!0;if($.toString().match(wz))return!0;return!1},f6=({method:$,hooks:J,validator:Y,handler:X,handleError:Z,meta:Q,onRequest:q,config:M})=>{const B=M.forceErrorEncapsulation||J.error.length>0||typeof Bun==="undefined"||J.onResponse.length>0,{composeValidation:D,composeResponseValidation:N}=Nz(B),P=J.onResponse.length?`\n;(async () => {${J.onResponse.map((S,V)=>`await res${V}(c)`).join(";")}})();\n`:"";let w=B?"try {\n":"";const A=Y||$!=="GET"?[X,...J.transform,...J.beforeHandle,...J.afterHandle].map((S)=>S.toString()):[],L=$!=="GET"&&J.type!=="none"&&(!!Y.body||!!J.type||A.some((S)=>e$("body",S))),O=Y.headers||A.some((S)=>e$("headers",S));if(O)w+=Bz.toJSON?"c.headers = c.request.headers.toJSON()\n":`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`;if(Y.query||A.some((S)=>e$("query",S)))w+=`const url = c.request.url

		if(c.qi !== -1) {
			c.query ??= parseQuery(url.substring(c.qi + 1))
		} else {
			c.query ??= {}
		}
		`;const G=A.some((S)=>e$("set",S))||q.some((S)=>e$("set",S.toString())),k=L||W0(X)||J.parse.length>0||J.afterHandle.some(W0)||J.beforeHandle.some(W0)||J.transform.some(W0);if(L){const S=Dz(Y?.body);if(J.type||S){if(J.type)switch(J.type){case"application/json":w+="c.body = await c.request.json();";break;case"text/plain":w+="c.body = await c.request.text();";break;case"application/x-www-form-urlencoded":w+="c.body = parseQuery(await c.request.text());";break;case"application/octet-stream":w+="c.body = await c.request.arrayBuffer();";break;case"multipart/form-data":w+=`c.body = {}

					const form = await c.request.formData()
					for (const key of form.keys()) {
						if (c.body[key])
							continue

						const value = form.getAll(key)
						if (value.length === 1)
							c.body[key] = value[0]
						else c.body[key] = value
					}`;break}else if(S){const V=Y?.body?.schema;switch(S){case"object":if(V.elysiaMeta==="URLEncoded")w+="c.body = parseQuery(await c.request.text())";else if(Y.body.Code().includes("custom('File"))w+=`c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue
		
								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}`;else w+="c.body = JSON.parse(await c.request.text())";break;default:w+="c.body = await c.request.text()";break}}if(J.parse.length)w+="}}"}else{if(w+="\n",w+=O?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",w+=`
            if (contentType) {
				const index = contentType.indexOf(';')
				if (index !== -1) contentType = contentType.substring(0, index)\n`,J.parse.length){w+="let used = false\n";for(let V=0;V<J.parse.length;V++){const T=`bo${V}`;if(V!==0)w+="if(!used) {\n";if(w+=`let ${T} = parse[${V}](c, contentType);`,w+=`if(${T} instanceof Promise) ${T} = await ${T};`,w+=`
						if(${T} !== undefined) { c.body = ${T}; used = true }\n`,V!==0)w+="}"}w+="if (!used)"}w+=`switch (contentType) {
			case 'application/json':
				c.body = await c.request.json()
				break

			case 'text/plain':
				c.body = await c.request.text()
				break

			case 'application/x-www-form-urlencoded':
				c.body = parseQuery(await c.request.text())
				break

			case 'application/octet-stream':
				c.body = await c.request.arrayBuffer();
				break

			case 'multipart/form-data':
				c.body = {}

				const form = await c.request.formData()
				for (const key of form.keys()) {
					if (c.body[key])
						continue

					const value = form.getAll(key)
					if (value.length === 1)
						c.body[key] = value[0]
					else c.body[key] = value
				}

				break
			}
		}\n`}w+="\n"}if(Y.params){const S=T$("Numeric",Y.params.schema);if(S){switch(typeof S){case"object":for(let V of S)w+=`if(c.params.${V}) c.params.${V} = +c.params.${V};`;break}w+="\n"}}if(Y.query){const S=T$("Numeric",Y.query.schema);if(S){switch(typeof S){case"object":for(let V of S)w+=`if(c.query.${V}) c.query.${V} = +c.query.${V};`;break}w+="\n"}}if(Y.headers){const S=T$("Numeric",Y.headers.schema);if(S){switch(typeof S){case"object":for(let V of S)w+=`c.headers.${V} = +c.headers.${V};`;break}w+="\n"}}if(Y.body){const S=T$("Numeric",Y.body.schema);if(S){switch(typeof S){case"string":w+="c.body = +c.body;";break;case"object":for(let V of S)w+=`c.body.${V} = +c.body.${V};`;break}w+="\n"}}if(J?.transform)for(let S=0;S<J.transform.length;S++)if(J.transform[S].$elysia==="derive")w+=W0(J.transform[S])?`Object.assign(c, await transform[${S}](c));`:`Object.assign(c, transform[${S}](c));`;else w+=W0(J.transform[S])?`await transform[${S}](c);`:`transform[${S}](c);`;if(Y){if(Y.headers)w+=`
                if (headers.Check(c.headers) === false) {
                    ${D("headers")}
				}
        `;if(Y.params)w+=`if(params.Check(c.params) === false) { ${D("params")} }`;if(Y.query)w+=`if(query.Check(c.query) === false) { ${D("query")} }`;if(Y.body)w+=`if(body.Check(c.body) === false) { ${D("body")} }`}if(J?.beforeHandle)for(let S=0;S<J.beforeHandle.length;S++){const V=`be${S}`;if(!$1(J.beforeHandle[S].toString()))w+=W0(J.beforeHandle[S])?`await beforeHandle[${S}](c);\n`:`beforeHandle[${S}](c);\n`;else{if(w+=W0(J.beforeHandle[S])?`let ${V} = await beforeHandle[${S}](c);\n`:`let ${V} = beforeHandle[${S}](c);\n`,w+=`if(${V} !== undefined) {\n`,J?.afterHandle){const F0=V;for(let J0=0;J0<J.afterHandle.length;J0++)if(!$1(J.afterHandle[J0].toString()))w+=W0(J.afterHandle[J0])?`await afterHandle[${J0}](c, ${F0});\n`:`afterHandle[${J0}](c, ${F0});\n`;else{const b0=`af${J0}`;w+=W0(J.afterHandle[J0])?`const ${b0} = await afterHandle[${J0}](c, ${F0});\n`:`const ${b0} = afterHandle[${J0}](c, ${F0});\n`,w+=`if(${b0} !== undefined) { ${F0} = ${b0} }\n`}}if(Y.response)w+=`if(response[c.set.status]?.Check(${V}) === false) { 
						if(!(response instanceof Error))
							${N(V)}
					}\n`;w+=`return mapEarlyResponse(${V}, c.set)}\n`}}if(J?.afterHandle.length){w+=W0(X)?"let r = await handler(c);\n":"let r = handler(c);\n";for(let S=0;S<J.afterHandle.length;S++){const V=`af${S}`;if(!$1(J.afterHandle[S].toString()))w+=W0(J.afterHandle[S])?`await afterHandle[${S}](c, r)\n`:`afterHandle[${S}](c, r)\n`;else if(w+=W0(J.afterHandle[S])?`let ${V} = await afterHandle[${S}](c, r)\n`:`let ${V} = afterHandle[${S}](c, r)\n`,Y.response)w+=`if(${V} !== undefined) {`,w+=`if(response[c.set.status]?.Check(${V}) === false) { 
						if(!(response instanceof Error))
						${N(V)}
					}\n`,w+=`${V} = mapEarlyResponse(${V}, c.set)\n`,w+=`if(${V}) return ${V};\n}`;else w+=`if(${V}) return ${V};\n`}if(Y.response)w+=`if(response[c.set.status]?.Check(r) === false) { 
				if(!(response instanceof Error))
					${N()}
			}\n`;if(G)w+="return mapResponse(r, c.set)\n";else w+="return mapCompactResponse(r)\n"}else if(Y.response)if(w+=W0(X)?"const r = await handler(c);\n":"const r = handler(c);\n",w+=`if(response[c.set.status]?.Check(r) === false) { 
				if(!(response instanceof Error))
					${N()}
			}\n`,G)w+="return mapResponse(r, c.set)\n";else w+="return mapCompactResponse(r)\n";else{const S=W0(X)?"await handler(c) ":"handler(c)";if(G)w+=`return mapResponse(${S}, c.set)\n`;else w+=`return mapCompactResponse(${S})\n`}if(B)w+=`
} catch(error) {
	

	${k?"":"return (async () => {"}
		const set = c.set

		if (!set.status || set.status < 300) set.status = 500

		${J.error.length?`for (let i = 0; i < handleErrors.length; i++) {
				let handled = handleErrors[i]({
					request: c.request,
					error: error,
					set,
					code: error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
				})
				if (handled instanceof Promise) handled = await handled

				const response = mapEarlyResponse(handled, set)
				if (response) return response
			}`:""}

		return handleError(c.request, error, set)
	${k?"":"})()"}
} finally {
	${P}
}`;return w=`const { 
		handler,
		handleError,
		hooks: {
			transform,
			beforeHandle,
			afterHandle,
			parse,
			error: handleErrors,
			onResponse
		},
		validator: {
			body,
			headers,
			params,
			query,
			response
		},
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError
		},
		meta,
		ERROR_CODE
	} = hooks

	${J.onResponse.length?`const ${J.onResponse.map((S,V)=>`res${V} = onResponse[${V}]`).join(",")}`:""}

	return ${k?"async":""} function(c) {
		${Q?'c["schema"] = meta["schema"]; c["defs"] = meta["defs"];':""}
		${w}
	}`,Function("hooks",w)({handler:X,hooks:J,validator:Y,handleError:Z,utils:{mapResponse:c0,mapCompactResponse:I1,mapEarlyResponse:f0,parseQuery:g6.parse},error:{NotFoundError:F$,ValidationError:B0,InternalServerError:b1},meta:Q,ERROR_CODE:$$})},g4=($)=>{let J="";for(let M of Object.keys($.decorators))J+=`,${M}: app.decorators.${M}`;const{router:Y,staticRouter:X}=$,Z=`
	const route = find(request.method, path) ${Y.root.ALL?'?? find("ALL", path)':""}
	if (route === null)
		return ${$.event.error.length?`handleError(
			request,
			notFound,
			ctx.set
		)`:`new Response(error404, {
					status: 404
				})`}

	ctx.params = route.params

	return route.store(ctx)`;let Q="";for(let[M,{code:B,all:D}]of Object.entries(X.map))Q+=`case '${M}':\nswitch(request.method) {\n${B}\n${D??`default: ${Z}`}}\n\n`;let q=`const {
		app,
		app: { store, router, staticRouter },
		mapEarlyResponse,
		NotFoundError
	} = data

	const notFound = new NotFoundError()

	${$.event.request.length?"const onRequest = app.event.request":""}

	${X.variables}

	const find = router.find.bind(router)
	const handleError = app.handleError.bind(this)

	${$.event.error.length?"":"const error404 = notFound.message.toString()"}

	return function(request) {
	`;if($.event.request.length){q+=`
			const ctx = {
				request,
				store,
				set: {
					headers: {},
					status: 200
				}
				${J}
			}

			try {\n`;for(let M=0;M<$.event.request.length;M++){const B=$1($.event.request[M].toString());q+=!B?`mapEarlyResponse(onRequest[${M}](ctx), ctx.set);`:`const response = mapEarlyResponse(
					onRequest[${M}](ctx),
					ctx.set
				)
				if (response) return response\n`}q+=`} catch (error) {
			return handleError(request, error, ctx.set)
		}
		
		const url = request.url,
		s = url.indexOf('/', 11),
		i = ctx.qi = url.indexOf('?', s + 1),
		path = ctx.path = i === -1 ? url.substring(s) : url.substring(s, i);`}else q+=`
		const url = request.url,
			s = url.indexOf('/', 11),
			qi = url.indexOf('?', s + 1),
			path = qi === -1
				? url.substring(s)
				: url.substring(s, qi)

		const ctx = {
			request,
			store,
			qi,
			path,
			set: {
				headers: {},
				status: 200
			}
			${J}
		}`;return q+=`
		switch(path) {
			${Q}

			default:
				${Z}
		}
	}`,$.handleError=f4($),Function("data",q)({app:$,mapEarlyResponse:f0,NotFoundError:F$})},f4=($)=>{let J=`const {
		app: { event: { error: onError, onResponse: res } },
		mapResponse,
		ERROR_CODE
	} = inject

	return ${$.event.error.find(W0)?"async":""} function(request, error, set) {`;for(let Y=0;Y<$.event.error.length;Y++){const X=$.event.error[Y],Z=`${W0(X)?"await ":""}onError[${Y}]({
			request,
			code: error.code ?? error[ERROR_CODE] ?? 'UNKNOWN',
			error,
			set
		})`;if($1(X.toString()))J+=`const r${Y} = ${Z}; if(r${Y} !== undefined) return mapResponse(r${Y}, set)\n`;else J+=Z+"\n"}return J+=`if(error.constructor.name === "ValidationError") {
		set.status = error.status ?? 400
		return new Response(
			error.message, 
			{ headers: set.headers, status: set.status }
		)
	} else {
		return new Response(error.message, { headers: set.headers, status: error.status ?? 500 })
	}
}`,Function("inject",J)({app:$,mapResponse:c0,ERROR_CODE:$$})};var _1=($)=>{const J=$.indexOf("/",10),Y=$.indexOf("?",J);if(Y===-1)return $.slice(J);return $.slice(J,Y)};class J1{raw;data;isSubscribed;constructor($){this.raw=$,this.data=$.data,this.isSubscribed=$.isSubscribed}publish($,J=void 0,Y){if(typeof J==="object")J=JSON.stringify(J);return this.raw.publish($,J,Y),this}publishToSelf($,J=void 0,Y){if(typeof J==="object")J=JSON.stringify(J);return this.raw.publish($,J,Y),this}send($){if(typeof $==="object")$=JSON.stringify($);return this.raw.send($),this}subscribe($){return this.raw.subscribe($),this}unsubscribe($){return this.raw.unsubscribe($),this}cork($){return this.raw.cork($),this}close(){return this.raw.close(),this}}var R1=($)=>(J)=>{if(!J.wsRouter)J.wsRouter=new s0;const Y=J.wsRouter;if(!J.config.serve)J.config.serve={websocket:{...$,open(X){if(!X.data)return;const Z=_1(X?.data.request.url);if(!Z)return;const Q=Y.find("subscribe",Z)?.store;if(Q&&Q.open)Q.open(new J1(X))},message(X,Z){if(!X.data)return;const Q=_1(X?.data.request.url);if(!Q)return;const q=Y.find("subscribe",Q)?.store;if(!q?.message)return;Z=Z.toString();const M=Z.charCodeAt(0);if(M===47||M===123)try{Z=JSON.parse(Z)}catch(B){}else if(!Number.isNaN(+Z))Z=+Z;for(let B=0;B<X.data.transformMessage.length;B++){const D=X.data.transformMessage[B](Z);if(D!==void 0)Z=D}if(X.data.message?.Check(Z)===!1)return void X.send(new B0("message",X.data.message,Z).cause);q.message(new J1(X),Z)},close(X,Z,Q){if(!X.data)return;const q=_1(X?.data.request.url);if(!q)return;const M=Y.find("subscribe",q)?.store;if(M&&M.close)M.close(new J1(X),Z,Q)},drain(X){if(!X.data)return;const Z=_1(X?.data.request.url);if(!Z)return;const Q=Y.find("subscribe",Z)?.store;if(Q&&Q.drain)Q.drain(new J1(X))}}};return J.decorate("publish",J.server?.publish).onStart((X)=>{X.decorators.publish=X.server?.publish})};var G1=t0(V4(),1),T4=($)=>async(J)=>{const Y={status:200,headers:{}};let X;if($.decorators)X=$.decorators,X.request=J,X.set=Y,X.store=$.store;else X={set:Y,store:$.store,request:J};const Z=J.url,Q=Z.indexOf("/",11),q=Z.indexOf("?",Q+1),M=q===-1?Z.substring(Q):Z.substring(Q,q);try{for(let O=0;O<$.event.request.length;O++){const R=$.event.request[O];let G=R(X);if(G instanceof Promise)G=await G;if(G=f0(G,Y),G)return G}const B=$.dynamicRouter.find(J.method,M)??$.dynamicRouter.find("ALL",M);if(!B)throw new F$;const{handle:D,hooks:N,validator:P,content:w}=B.store;let A;if(J.method!=="GET")if(w)switch(w){case"application/json":A=await J.json();break;case"text/plain":A=await J.text();break;case"application/x-www-form-urlencoded":A=G1.parse(await J.text());break;case"application/octet-stream":A=await J.arrayBuffer();break;case"multipart/form-data":A={};const O=await J.formData();for(let R of O.keys()){if(A[R])continue;const G=O.getAll(R);if(G.length===1)A[R]=G[0];else A[R]=G}break}else{let O=J.headers.get("content-type");if(O){const R=O.indexOf(";");if(R!==-1)O=O.slice(0,R);for(let G=0;G<$.event.parse.length;G++){let k=$.event.parse[G](X,O);if(k instanceof Promise)k=await k;if(k){A=k;break}}if(A===void 0)switch(O){case"application/json":A=await J.json();break;case"text/plain":A=await J.text();break;case"application/x-www-form-urlencoded":A=G1.parse(await J.text());break;case"application/octet-stream":A=await J.arrayBuffer();break;case"multipart/form-data":A={};const G=await J.formData();for(let k of G.keys()){if(A[k])continue;const y=G.getAll(k);if(y.length===1)A[k]=y[0];else A[k]=y}break}}}X.body=A,X.params=B?.params||{},X.query=q===-1?{}:G1.parse(Z.substring(q+1));for(let O=0;O<N.transform.length;O++){const R=N.transform[O](X);if(N.transform[O].$elysia==="derive")if(R instanceof Promise)Object.assign(X,await R);else Object.assign(X,R);else if(R instanceof Promise)await R}if(P){if(P.headers){const O={};for(let R in J.headers)O[R]=J.headers.get(R);if(P.headers.Check(O)===!1)throw new B0("header",P.headers,O)}if(P.params?.Check(X.params)===!1)throw new B0("params",P.params,X.params);if(P.query?.Check(X.query)===!1)throw new B0("query",P.query,X.query);if(P.body?.Check(A)===!1)throw new B0("body",P.body,A)}for(let O=0;O<N.beforeHandle.length;O++){let R=N.beforeHandle[O](X);if(R instanceof Promise)R=await R;if(R!==void 0){for(let k=0;k<N.afterHandle.length;k++){let y=N.afterHandle[k](X,R);if(y instanceof Promise)y=await y;if(y)R=y}const G=f0(R,X.set);if(G)return G}}let L=D(X);if(L instanceof Promise)L=await L;if(!N.afterHandle.length){const O=P?.response?.[L.status];if(O?.Check(L)===!1)throw new B0("response",O,L)}else for(let O=0;O<N.afterHandle.length;O++){let R=N.afterHandle[O](X,L);if(R instanceof Promise)R=await R;const G=f0(R,X.set);if(G!==void 0){const k=P?.response?.[L.status];if(k?.Check(G)===!1)throw new B0("response",k,G);return G}}return c0(L,X.set)}catch(B){if(B.status)Y.status=B.status;return $.handleError(J,B,Y)}finally{for(let B of $.event.onResponse)await B(X)}},T6=($)=>async(J,Y,X={headers:{}})=>{for(let Z=0;Z<$.event.error.length;Z++){let Q=$.event.error[Z]({request:J,code:Y.code??Y[$$]??"UNKNOWN",error:Y,set:X});if(Q instanceof Promise)Q=await Q;if(Q!==void 0&&Q!==null)return c0(Q,X)}return new Response(typeof Y.cause==="string"?Y.cause:Y.message,{headers:X.headers,status:Y.status??500})};var Y$=t0(G0(),1),J$=t0(i$(),1);try{J$.TypeSystem.Format("email",($)=>/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test($)),J$.TypeSystem.Format("uuid",($)=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test($)),J$.TypeSystem.Format("date",($)=>!Number.isNaN(new Date($).getTime())),J$.TypeSystem.Format("date-time",($)=>!Number.isNaN(new Date($).getTime()))}catch($){}var d6=($)=>{if(typeof $==="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},y6=($,J)=>{if(!(J instanceof Blob))return!1;if($.minSize&&J.size<d6($.minSize))return!1;if($.maxSize&&J.size>d6($.maxSize))return!1;if($.extension)if(typeof $.extension==="string"){if(!J.type.startsWith($.extension))return!1}else{for(let Y=0;Y<$.extension.length;Y++)if(J.type.startsWith($.extension[Y]))return!0;return!1}return!0},v6={Numeric:J$.TypeSystem.Type("Numeric",{}),File:J$.TypeSystem.Type("File",y6),Files:J$.TypeSystem.Type("Files",($,J)=>{if(!Array.isArray(J))return!1;if($.minItems&&J.length<$.minItems)return!1;if($.maxItems&&J.length>$.maxItems)return!1;for(let Y=0;Y<J.length;Y++)if(!y6($,J[Y]))return!1;return!0})};Y$.Type.Numeric=($)=>{return Y$.Type.Number({...$,elysiaMeta:"Numeric"})};Y$.Type.URLEncoded=($,J)=>{return Y$.Type.Object($,{...J,elysiaMeta:"URLEncoded"})};Y$.Type.File=($)=>v6.File({elysiaMeta:"File",default:"File",...$,extension:$?.type,type:"string",format:"binary"});Y$.Type.Files=($)=>v6.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}});class E1{config;dependencies={};store={};meta={schema:Object.create(null),defs:Object.create(null),exposed:Object.create(null)};decorators={};event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],onResponse:[],error:[],stop:[]};server=null;$schema=null;error={};router=new s0;routes=[];staticRouter={handlers:[],variables:"",map:{},all:""};wsRouter;dynamicRouter=new s0;lazyLoadModules=[];path="";constructor($){this.config={forceErrorEncapsulation:!1,prefix:"",aot:typeof CF==="undefined",strictPath:!1,...$,seed:$?.name&&$.seed===void 0?"":$?.seed}}add($,J,Y,X,{allowMeta:Z=!1,skipPrefix:Q=!1}={allowMeta:!1,skipPrefix:!1}){if(J=J===""?J:J.charCodeAt(0)===47?J:`/${J}`,this.config.prefix&&!Q)J=this.config.prefix+J;const q=this.meta.defs;if(X?.type)switch(X.type){case"text":X.type="text/plain";break;case"json":X.type="application/json";break;case"formdata":X.type="multipart/form-data";break;case"urlencoded":X.type="application/x-www-form-urlencoded";break;case"arrayBuffer":X.type="application/octet-stream";break;default:break}const M={body:I0(X?.body??this.$schema?.body,{dynamic:!this.config.aot,models:q}),headers:I0(X?.headers??this.$schema?.headers,{dynamic:!this.config.aot,models:q,additionalProperties:!0}),params:I0(X?.params??this.$schema?.params,{dynamic:!this.config.aot,models:q}),query:I0(X?.query??this.$schema?.query,{dynamic:!this.config.aot,models:q}),response:R4(X?.response??this.$schema?.response,{dynamic:!this.config.aot,models:q})},B=e0(this.event,X),D=J.endsWith("/")?J.slice(0,J.length-1):J+"/";if(this.config.aot===!1){if(this.dynamicRouter.add($,J,{validator:M,hooks:B,content:X?.type,handle:Y}),this.config.strictPath===!1)this.dynamicRouter.add($,D,{validator:M,hooks:B,content:X?.type,handle:Y});this.routes.push({method:$,path:J,composed:null,handler:Y,hooks:B});return}const N=f6({path:J,method:$,hooks:B,validator:M,handler:Y,handleError:this.handleError,meta:Z?this.meta:void 0,onRequest:this.event.request,config:this.config});if(this.routes.push({method:$,path:J,composed:N,handler:Y,hooks:B}),J.indexOf(":")===-1&&J.indexOf("*")===-1){const P=this.staticRouter.handlers.length;if(this.staticRouter.handlers.push(N),this.staticRouter.variables+=`const st${P} = staticRouter.handlers[${P}]\n`,!this.staticRouter.map[J])this.staticRouter.map[J]={code:""};if($==="ALL")this.staticRouter.map[J].all=`default: return st${P}(ctx)\n`;else this.staticRouter.map[J].code+=`case '${$}': return st${P}(ctx)\n`;if(!this.config.strictPath){if(!this.staticRouter.map[D])this.staticRouter.map[D]={code:""};if($==="ALL")this.staticRouter.map[D].all=`default: return st${P}(ctx)\n`;else this.staticRouter.map[D].code+=`case '${$}': return st${P}(ctx)\n`}}else if(this.router.add($,J,N),!this.config.strictPath)this.router.add($,J.endsWith("/")?J.slice(0,J.length-1):J+"/",N)}onStart($){return this.event.start.push($),this}onRequest($){return this.event.request.push($),this}onParse($){return this.event.parse.splice(this.event.parse.length-1,0,$),this}onTransform($){return this.event.transform.push($),this}onBeforeHandle($){return this.event.beforeHandle.push($),this}onAfterHandle($){return this.event.afterHandle.push($),this}onResponse($){return this.event.onResponse.push($),this}addError($,J){if(typeof $==="string"&&J)return J.prototype[$$]=$,this;for(let[Y,X]of Object.entries($))X.prototype[$$]=Y;return this}onError($){if($)this.event.error.push($);return this}onStop($){return this.event.stop.push($),this}on($,J){switch($){case"start":this.event.start.push(J);break;case"request":this.event.request.push(J);break;case"response":this.event.onResponse.push(J);break;case"parse":this.event.parse.push(J);break;case"transform":this.event.transform.push(J);break;case"beforeHandle":this.event.beforeHandle.push(J);break;case"afterHandle":this.event.afterHandle.push(J);break;case"error":this.event.error.push(J);break;case"stop":this.event.stop.push(J);break}return this}group($,J,Y){const X=new E1({...this.config,prefix:this.config.prefix+$});if(X.store=this.store,this.wsRouter)X.use(R1());const Z=typeof J==="object",Q=(Z?Y:J)(X);if(this.decorators=k0(this.decorators,X.decorators),Q.event.request.length)this.event.request=[...this.event.request,...Q.event.request];if(Q.event.onResponse.length)this.event.onResponse=[...this.event.onResponse,...Q.event.onResponse];if(this.model(Q.meta.defs),Object.values(X.routes).forEach(({method:q,path:M,handler:B,hooks:D})=>{if(Z){const N=J,P=D;if(X.wsRouter?.find("subscribe",M)){const A=X.wsRouter.history.find(([L,O])=>M===O);if(!A)return;return this.ws(M,A[2])}this.add(q,M,B,e0(N,{...P,error:!P.error?Q.event.error:Array.isArray(P.error)?[...P.error,...Q.event.error]:[P.error,...Q.event.error]}))}else{if(X.wsRouter?.find("subscribe",M)){const P=X.wsRouter.history.find(([w,A])=>M===A);if(!P)return;return this.ws(M,P[2])}this.add(q,M,B,e0(D,{error:Q.event.error}),{skipPrefix:!0})}}),X.wsRouter&&this.wsRouter)X.wsRouter.history.forEach(([q,M,B])=>{if(M==="/")this.wsRouter?.add(q,$,B);else this.wsRouter?.add(q,`${$}${M}`,B)});return this}guard($,J){if(!J)return this.event=f$(this.event,$),this.$schema={body:$.body,headers:$.headers,params:$.params,query:$.query,response:$.response},this;const Y=new E1;if(Y.store=this.store,this.wsRouter)Y.use(R1());const X=J(Y);if(this.decorators=k0(this.decorators,Y.decorators),X.event.request.length)this.event.request=[...this.event.request,...X.event.request];if(X.event.onResponse.length)this.event.onResponse=[...this.event.onResponse,...X.event.onResponse];if(this.model(X.meta.defs),Object.values(Y.routes).forEach(({method:Z,path:Q,handler:q,hooks:M})=>{if(Y.wsRouter?.find("subscribe",Q)){const D=Y.wsRouter.history.find(([N,P])=>Q===P);if(!D)return;return this.ws(Q,D[2])}this.add(Z,Q,q,S0(e0($,{...M,error:!M.error?X.event.error:Array.isArray(M.error)?[...M.error,...X.event.error]:[M.error,...X.event.error]})))}),Y.wsRouter&&this.wsRouter)Y.wsRouter.history.forEach(([Z,Q,q])=>{this.wsRouter?.add(Z,Q,q)});return this}use($){if($ instanceof Promise)return this.lazyLoadModules.push($.then((X)=>{if(typeof X==="function")return X(this);if(typeof X.default==="function")return X.default(this);const Z=X.default,{config:{name:Q,seed:q}}=Z;if(Q){if(!this.dependencies[Q])this.dependencies[Q]=[];const M=q!==void 0?G4(Q+JSON.stringify(q)):0;if(this.dependencies[Q].some((B)=>M===B))return this;this.dependencies[Q].push(M),this.event=f$(this.event,Z.event,M)}else this.event=f$(this.event,Z.event);return this.decorators=k0(this.decorators,Z.decorators),this.model(Z.meta.defs),Object.values(Z.routes).forEach(({method:M,path:B,handler:D,hooks:N})=>{if(Z.wsRouter?.find("subscribe",B)){const w=Z.wsRouter.history.find(([A,L])=>B===L);if(!w)return;return this.ws(B,w[2])}this.add(M,B,D,e0(N,{error:Z.event.error}))}),this}).then((X)=>X.compile())),this;if(typeof $==="function"){const X=$(this);if(X instanceof Promise)return this.lazyLoadModules.push(X.then((Z)=>Z.compile())),this;return X}const{config:{name:J,seed:Y}}=$;if(J){if(!(J in this.dependencies))this.dependencies[J]=[];const X=Y!==void 0?G4(J+JSON.stringify(Y)):0;if(this.dependencies[J].some((Z)=>X===Z))return this;this.dependencies[J].push(X),this.event=f$(this.event,$.event,X)}else this.event=f$(this.event,$.event);return this.decorators=k0(this.decorators,$.decorators),this.model($.meta.defs),Object.values($.routes).forEach(({method:X,path:Z,handler:Q,hooks:q})=>{if($.wsRouter?.find("subscribe",Z)){const B=$.wsRouter.history.find(([D,N])=>Z===N);if(!B)return;return this.ws(Z,B[2])}this.add(X,Z,Q,e0(U6(q),{error:$.event.error}))}),this}mount($,J){if(typeof $==="function"||$.length===0||$==="/"){const Z=typeof $==="function"?$:J,Q=async({request:q,path:M})=>Z(new Request("http://a.cc"+M||"/",q));return this.all("/",Q,{type:"none"}),this.all("/*",Q,{type:"none"}),this}const Y=$.length,X=async({request:Z,path:Q})=>J(new Request("http://a.cc"+Q.slice(Y)||"/",Z));return this.all($,X,{type:"none"}),this.all($+($.endsWith("/")?"*":"/*"),X,{type:"none"}),this}get($,J,Y){return this.add("GET",$,J,S0(Y)),this}post($,J,Y){return this.add("POST",$,J,S0(Y)),this}put($,J,Y){return this.add("PUT",$,J,S0(Y)),this}patch($,J,Y){return this.add("PATCH",$,J,S0(Y)),this}delete($,J,Y){return this.add("DELETE",$,J,S0(Y)),this}options($,J,Y){return this.add("OPTIONS",$,J,S0(Y)),this}all($,J,Y){return this.add("ALL",$,J,S0(Y)),this}head($,J,Y){return this.add("HEAD",$,J,S0(Y)),this}trace($,J,Y){return this.add("TRACE",$,J,S0(Y)),this}connect($,J,Y){return this.add("CONNECT",$,J,S0(Y)),this}ws($,J){if(!this.wsRouter)throw new Error("Can't find WebSocket. Please register WebSocket plugin first by importing 'elysia/ws'");return this.wsRouter.add("subscribe",$,J),this.get($,(Y)=>{if(this.server?.upgrade(Y.request,{headers:typeof J.upgrade==="function"?J.upgrade(Y):J.upgrade,data:{...Y,id:Date.now(),headers:Y.request.headers.toJSON(),message:I0(J?.body,{models:this.meta.defs}),transformMessage:!J.transform?[]:Array.isArray(J.transformMessage)?J.transformMessage:[J.transformMessage]}}))return;return Y.set.status=400,"Expected a websocket connection"},{beforeHandle:J.beforeHandle,transform:J.transform,headers:J?.headers,params:J?.params,query:J?.query}),this}route($,J,Y,{config:X,...Z}={config:{allowMeta:!1}}){return this.add($,J,Y,S0(Z),X),this}state($,J){if(typeof $==="object")return this.store=k0(this.store,$),this;if(!($ in this.store))this.store[$]=J;return this}decorate($,J){if(typeof $==="object")return this.decorators=k0(this.decorators,$),this;if(!($ in this.decorators))this.decorators[$]=J;return this}derive($){return $.$elysia="derive",this.onTransform($)}schema($){const J=this.meta.defs;return this.$schema={body:I0($.body,{models:J}),headers:I0($?.headers,{models:J,additionalProperties:!0}),params:I0($?.params,{models:J}),query:I0($?.query,{models:J}),response:I0($?.response,{models:J})},this}compile(){if(this.fetch=this.config.aot?g4(this):T4(this),this.server)this.server.reload({...this.server,fetch:this.fetch});return this}handle=async($)=>this.fetch($);fetch=($)=>(this.fetch=this.config.aot?g4(this):T4(this))($);handleError=async($,J,Y)=>(this.handleError=this.config.aot?f4(this):T6(this))($,J,Y);outerErrorHandler=($)=>new Response($.message,{status:$?.status??500});listen=($,J)=>{if(!Bun)throw new Error("Bun to run");if(this.compile(),typeof $==="string"){if($=+$.trim(),Number.isNaN($))throw new Error("Port must be a numeric value")}const Y=this.fetch,X=typeof $==="object"?{development:!a$,...this.config.serve,...$,fetch:Y,error:this.outerErrorHandler}:{development:!a$,...this.config.serve,port:$,fetch:Y,error:this.outerErrorHandler};if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");this.server=Bun?.serve(X);for(let Z=0;Z<this.event.start.length;Z++)this.event.start[Z](this);if(J)J(this.server);return Promise.all(this.lazyLoadModules).then(()=>{Bun?.gc(!0)}),this};stop=async()=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");this.server.stop();for(let $=0;$<this.event.stop.length;$++)await this.event.stop[$](this)};get modules(){return Promise.all(this.lazyLoadModules)}model($,J){if(typeof $==="object")Object.entries($).forEach(([Y,X])=>{if(!(Y in this.meta.defs))this.meta.defs[Y]=X});else this.meta.defs[$]=J;return this}}var export_t=Y$.Type;export{R1 as ws,export_t as t,M0 as mergeObjectArray,e0 as mergeHook,k0 as mergeDeep,c0 as mapResponse,f0 as mapEarlyResponse,I1 as mapCompactResponse,I0 as getSchemaValidator,R4 as getResponseSchemaValidator,E1 as default,B0 as ValidationError,k6 as ParseError,F$ as NotFoundError,b1 as InternalServerError,E1 as Elysia};

//# debugId=A756DAE08CACEAC264756e2164756e21
